# 进程布局
当程序在计算机上运行时，计算机将该程序作为进程运行。当前的计算机架构允许多个进程同时运行（由一台计算机同时运行）。虽然这些进程可能看起来同时运行，但计算机实际上非常快速地在进程之间切换，并使它们看起来像是同时运行。进程之间的切换称为上下文切换

![image.png](https://s2.loli.net/2025/04/21/BbLIVw42dhGiNfy.png)



User 堆栈包含运行程序所需的信息。这些信息将包括当前程序计数器、保存的寄存器和更多信息（我们将在下一节中详细介绍）。用户堆栈后面的部分是未使用的内存，在堆栈增长（向下）时使用

共享库区域(Shared library regions)用于静态/动态链接程序使用的库

堆(heap)会动态增加和减少，具体取决于程序是否动态分配内存。请注意，在堆上方有一个未分配的部分，该部分在堆大小增加时使用。

程序代码和数据存储程序可执行文件和初始化变量。

# x86-64 过程
**Pushing**：用于将数据添加到堆栈上 压入

**Popping**：用于从堆栈中删除数据 出栈

push var 将值推送到堆栈上的汇编指令
- 使用 var 或存储在 var 内存位置的值；
- 将堆栈指针（被称为rsp）减 8；
- 将上面的值写入 rsp 的新位置，该位置现在是堆栈的顶部

![image.png](https://s2.loli.net/2025/04/21/5FsOnfjkzeMrYBZ.png)
![image.png](https://s2.loli.net/2025/04/21/UMeXYrmC2jsJIQy.png)


pop var
读取一个值并将其从堆栈中弹出

- 读取堆栈指针（rsp）给定地址处的值；
- 将堆栈指针（rsp）增加 8；
- 将之前从rsp读取到的值存储到 var。
弹出堆栈中的值时内存并不会改变 - 只有堆栈指针的值会改变

![image.png](https://s2.loli.net/2025/04/21/Z8sjHFicfKX5NQt.png)
![image.png](https://s2.loli.net/2025/04/21/YQHg1Ts28meZqvo.png)


calc 称为调用函数

add 称为被调用函数

- add 函数是使用汇编中的 call 操作数调用的


#  覆盖变量

# 覆盖函数指针